
<!-- saved from url=(1599)http://2ge1ffhdgsaom3padg8i2jd5pke1ajbt-a-fc-opensocial.googleusercontent.com/gadgets/ifr?url=http://gadgetsforblogger.googlecode.com/files/recent-comments-gadget.xml&container=peoplesense&parent=http://skyandland-grace.blogspot.com/&mid=0&view=profile&libs=google.blog&d=0.1-40d37c72_beec7057_5fb1f497_f893192a_ff72ef73.7&lang=zh&country=TW&view-params=%7B%22summaryLength%22:%22100%22,%22numberOfPosts%22:%225%22,%22skin%22:%7B%22FACE_SIZE%22:%2232%22,%22HEIGHT%22:%22200%22,%22TITLE%22:%22%E6%9C%80%E6%96%B0%E7%95%99%E8%A8%80%22,%22BORDER_COLOR%22:%22transparent%22,%22ENDCAP_BG_COLOR%22:%22transparent%22,%22ENDCAP_TEXT_COLOR%22:%22%233d3d3d%22,%22ENDCAP_LINK_COLOR%22:%22%233d74a5%22,%22ALTERNATE_BG_COLOR%22:%22transparent%22,%22CONTENT_BG_COLOR%22:%22transparent%22,%22CONTENT_LINK_COLOR%22:%22%233d74a5%22,%22CONTENT_TEXT_COLOR%22:%22%233d3d3d%22,%22CONTENT_SECONDARY_LINK_COLOR%22:%22%233d74a5%22,%22CONTENT_SECONDARY_TEXT_COLOR%22:%22%23666666%22,%22CONTENT_HEADLINE_COLOR%22:%22%23666666%22,%22FONT_FACE%22:%22normal+normal+14px+Arial,+Tahoma,+Helvetica,+FreeSans,+sans-serif;%22%7D%7D&up_summaryLength=100&up_numberOfPosts=5&communityId=04752417526866491300&caller=http://skyandland-grace.blogspot.com/2012/03/blog-post.html#st=e%3DAOG8GaDgaFGvPIZKu2Ls1tM5l1xKFU4UOozvic4FGk0zf0yOvkhV7kRPnhU2v92gv2iCqSz4e4ftkcp6WmDVw4SvZGgTEvOYIq%252Fa0rf18RXBgVqVeX5QdV%252B2Ylexh30N34NeZdk8W1sTiPznWWFKffIrpOVLPoF1fR3QXOe6geRbqdHol%252Bqbr41C9oDR3nliNWNF7BTQxO8Thr60nNS1M1Nbr3Mix0ZQt4YBEedHYY2q95p4Y9g8htWlKA5g89YM%252FZP3sRvbKJz78ejTC5cjXJVgAYuLwe3TjA%253D%253D%26c%3Dpeoplesense&rpctoken=1213723887& -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(){var a=window;function b(d){this.t={};this.tick=function(d,h,c){c=void 0!=c?c:(new Date).getTime();this.t[d]=[c,h]};this.tick("start",null,d)}var e=new b;a.jstiming={Timer:b,load:e};try{var f=top!=self,g=a.location.href,i=null;a.chrome&&a.chrome.csi&&(i=Math.floor(a.chrome.csi().pageT));null==i&&a.gtbExternal&&(i=f?a.gtbExternal.frameT(g):a.gtbExternal.pageT());null==i&&a.external&&(i=f?a.external.frameT(g):a.external.pageT);i&&(a.jstiming.pt=i)}catch(j){};})();
window["__csi"]={a:false,b:false,c:"peoplesense",v:"profile",g:null,d:false};if(window.jstiming){window.jstiming.beaconImageReferences_={};window.jstiming.reportCounter_=1;var getTick=function(c,b,d){var a=c.t[b],g=c.t.start;if(a&&(g||d))return a=c.t[b][0],g=void 0!=d?d:g[0],a-g},getReportUri=function(c,b,d){var a="";window.jstiming.pt&&(a+="&srt="+window.jstiming.pt,delete window.jstiming.pt);try{window.external&&window.external.tran?a+="&tran="+window.external.tran:window.gtbExternal&&window.gtbExternal.tran?a+="&tran="+window.gtbExternal.tran():window.chrome&&window.chrome.csi&&
(a+="&tran="+window.chrome.csi().tran)}catch(g){}var f=window.chrome;if(f&&(f=f.loadTimes))f().wasFetchedViaSpdy&&(a+="&p=s"),f().wasNpnNegotiated&&(a+="&npn=1"),f().wasAlternateProtocolAvailable&&(a+="&apa=1");var e=c.t,i=e.start,f=[],l=[],h;for(h in e)if("start"!=h&&0!=h.indexOf("_")){var j=e[h][1];j?e[j]&&l.push(h+"."+getTick(c,h,e[j][0])):i&&f.push(h+"."+getTick(c,h))}delete e.start;if(b)for(var n in b)a+="&"+n+"="+b[n];(b=d)||(b="https:"==document.location.protocol?"https://csi.gstatic.com/csi":
"http://csi.gstatic.com/csi");return c=[b,"?v=3","&s="+(window.jstiming.sn||"opensocial-gadgets")+"&action=",c.name,l.length?"&it="+l.join(","):"","",a,"&rt=",f.join(",")].join("")},sendReport_=function(c,b,d){c=getReportUri(c,b,d);if(!c)return"";var b=new Image,a=window.jstiming.reportCounter_++;window.jstiming.beaconImageReferences_[a]=b;b.onload=b.onerror=function(){window.jstiming&&delete window.jstiming.beaconImageReferences_[a]};b.src=c;b=null;return c};window.jstiming.report=function(c,b,d){if("prerender"==
document.webkitVisibilityState){var a="webkitvisibilitychange",g=!1,f=function(){if(!g){b?b.prerender="1":b={prerender:"1"};var e;"prerender"==document.webkitVisibilityState?e=!1:(sendReport_(c,b,d),e=!0);e&&(g=!0,document.removeEventListener(a,f,!1))}};document.addEventListener(a,f,!1);return""}return sendReport_(c,b,d)}};var google=window.google||{};
google.csi=function(){function c(a){var b=i?i:document.location.href;return(a=b.match(RegExp("[?&]"+a+"=([^&#]+)")))?a[1]:null}function b(a){window.jstiming.load.tick(a);e[a]=(new Date).getTime()}function d(){if(!h){var a=c("url")||"default",b=window.__csi||{},d=b.c||"default",g=b.v||"default",m=window.encodeURIComponent?encodeURIComponent:escape,m={gadget:m(a),container:m(d),view:m(g)},i=window.__dflags||{},j=[];b.g&&j.push(b.g);if(b.d)for(var k in i)"control"!==i[k]&&(m[k]=i[k],"true"===i[k]&&j.push(k));
m.e=j.join(",");k=l?l:document.location.protocol;k=f[k];window.jstiming.load.name=[d,"_",g].join("");window.jstiming.report(window.jstiming.load,m,k);if((d=window.gadgets)&&d.rpc&&b.b)e.url=a,e.id=c("mid"),d.rpc.call(null,"time_iframe",null,e);h=!0}}function a(a){window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a)}function g(a){window.onbeforeunload=a}var f={"http:":"http://csi.gstatic.com/csi","https:":"https://gg.google.com/csi"},e={},
i,l,h=!1,j=window.__csi||{};j.a?(a(function(){b("prt")}),g(function(){d()})):a(function(){b("ol");b("prt");d()});return{reset_:function(){h=!1},mockHref_:function(a){i=a},mockProtocol_:function(a){l=a},report_:d,tickPrtAndReport:function(){b("prt");d()},tickDl:function(){b("dl")}}}();
</script><style type="text/css">body,td,div,span,p{font-family:arial,sans-serif;}a {color:#0000cc;}a:visited {color:#551a8b;}a:active {color:#ff0000;}body{margin: 0px;padding: 0px;background-color:white;}</style><script>__dflags={"ContentDivGadgetRewriter":"false","HtmlParser":"control","ResourceUsageJsDebugGadgetRewriter":"true","JsSubVersion":"control","UseJsHintIfAvailable":"false","DynamicHeightGadgetRewriter":"true","GadgetBlacklist":"control","LogResources":"false","ErrorCodesToLog":"control","AdsUrlGadgetRewriter":"true","EnableJsErrorTracking":"true","Monkeypatch":"control","ProxyingGadgetRewriter":"true","TrackResources":"false","AnalyticsGadgetRewriter":"true","InjectClientId":"false","ClickTrackGadgetRewriter":"false","CsiSample":"true","UseJsPipelineForRendering":"false","StyleAdjacencyGadgetRewriter":"true","DflagsJsDebugGadgetRewriter":"true","YtVideoUrlGadgetRewriter":"true","StyleTagExtractorGadgetRewriter":"true","MiniMessageGadgetRewriter":"true","TimeSecsSinceEpochEnvGadgetRewriter":"true","JsRepositoryId":"control","UseUrlGadgetWhitelist":"false","UseETags":"false","GmailSkinsGadgetRewriter":"true"};
window['__isgadget']=true;</script><script src="google.blog.js"></script><script>window['___jsl'] = window['___jsl'] || {};(window['___jsl']['ci'] = (window['___jsl']['ci'] || [])).push({"opensocial":{"invalidatePath":"//%host%/gadgets/api/rpc","domain":"google.com","path":"http://%host%/ps/api/rpc","supportedFields":{"person":["id","name","thumbnailUrl","nickname","profileUrl"],"mediaItem":["album_id","created","description","duration","file_size","id","language","last_updated","location","mime_type","num_comments","num_views","num_votes","rating","start_time","tagged_people","tags","thumbnail_url","title","type","url"],"sortOrder":["name"],"name":["unstructured","familyName","givenName","additionalName","honorificPrefix","honorificSuffix"],"album":["id","thumbnailUrl","title","description","location","ownerId"],"filterType":["all","hasApp"],"activity":["id","externalId","userId","appId","streamTitle","streamUrl","streamSourceUrl","streamFaviconUrl","title","body","url","mediaItems","postedTime","userThumbnailUrl","userProfileUrl","userName"],"activityMediaItem":["type","mimeType","url"]}},"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"},"shindig.auth":{"authToken":"","trustedJson":""},"views":{"canvas":{"isOnlyVisible":true,"urlTemplate":"http://localhost/gadgets/canvas?{var}","aliases":["FULL_PAGE"]},"embed":{"isOnlyVisible":false,"urlTemplate":"http://localhost/gadgets/embed?{var}","aliases":["profile","DASHBOARD","default"]},"profile":{"isOnlyVisible":false,"urlTemplate":"http://localhost/gadgets/profile?{var}","aliases":["DASHBOARD","default"]}},"core.util":{"opensocial-0.7":{},"google.blog":{},"core":{},"skins":{},"dynamic-height":{},"views":{}},"skins":{"properties":{"BG_POSITION":"","FONT_COLOR":"","BG_IMAGE":"","ANCHOR_COLOR":"","BG_REPEAT":"","BG_COLOR":""}},"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www-fc-opensocial.googleusercontent.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"}});shindig.Auth=function(){var authToken=null;
var trusted=null;
function addParamsToToken(urlParams){var args=authToken.split("&");
for(var i=0;
i<args.length;
i++){var nameAndValue=args[i].split("=");
if(nameAndValue.length===2){var name=nameAndValue[0];
var value=nameAndValue[1];
if(value==="$"){value=encodeURIComponent(urlParams[name]);
args[i]=name+"="+value
}}}authToken=args.join("&")
}function init(configuration){var urlParams=gadgets.util.getUrlParameters();
var config=configuration["shindig.auth"]||{};
if(config.authToken){authToken=config.authToken
}else{if(urlParams.st){authToken=urlParams.st
}}if(authToken!==null){addParamsToToken(urlParams)
}if(config.trustedJson){trusted=(eval("("+config.trustedJson+")"))
}}gadgets.config.register("shindig.auth",null,init);
return{getSecurityToken:function(){return authToken
},updateSecurityToken:function(newToken){authToken=newToken
},getTrustedData:function(){return trusted
}}
};;
shindig.auth=new shindig.Auth();;
var opensocial=opensocial||{};
opensocial.requestSendMessage=function(a,d,b,c){return opensocial.Container.get().requestSendMessage(a,d,b,c)
};
opensocial.requestShareApp=function(a,d,b,c){opensocial.Container.get().requestShareApp(a,d,b,c)
};
opensocial.requestCreateActivity=function(c,b,a){if(!c||(!c.getField(opensocial.Activity.Field.TITLE)&&!c.getField(opensocial.Activity.Field.TITLE_ID))){if(a){window.setTimeout(function(){a(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.BAD_REQUEST,"You must pass in an activity with a title or title id."))
},0)
}return
}opensocial.Container.get().requestCreateActivity(c,b,a)
};
opensocial.CreateActivityPriority={HIGH:"HIGH",LOW:"LOW"};
opensocial.hasPermission=function(a){return opensocial.Container.get().hasPermission(a)
};
opensocial.requestPermission=function(b,c,a){opensocial.Container.get().requestPermission(b,c,a)
};
opensocial.Permission={VIEWER:"viewer"};
opensocial.getEnvironment=function(){return opensocial.Container.get().getEnvironment()
};
opensocial.newDataRequest=function(){return opensocial.Container.get().newDataRequest()
};
opensocial.newActivity=function(a){return opensocial.Container.get().newActivity(a)
};
opensocial.newAlbum=function(a){return opensocial.Container.get().newAlbum(a)
};
opensocial.newMediaItem=function(c,a,b){return opensocial.Container.get().newMediaItem(c,a,b)
};
opensocial.newMessage=function(a,b){return opensocial.Container.get().newMessage(a,b)
};
opensocial.EscapeType={HTML_ESCAPE:"htmlEscape",NONE:"none"};
opensocial.newIdSpec=function(a){return opensocial.Container.get().newIdSpec(a)
};
opensocial.newNavigationParameters=function(a){return opensocial.Container.get().newNavigationParameters(a)
};
opensocial.invalidateCache=function(){opensocial.Container.get().invalidateCache()
};
Function.prototype.inherits=function(a){function b(){}b.prototype=a.prototype;
this.superClass_=a.prototype;
this.prototype=new b();
this.prototype.constructor=this
};;
opensocial.Activity=function(a){this.fields_=a
};
opensocial.Activity.Field={TITLE_ID:"titleId",TITLE:"title",TEMPLATE_PARAMS:"templateParams",URL:"url",MEDIA_ITEMS:"mediaItems",BODY_ID:"bodyId",BODY:"body",EXTERNAL_ID:"externalId",STREAM_TITLE:"streamTitle",STREAM_URL:"streamUrl",STREAM_SOURCE_URL:"streamSourceUrl",STREAM_FAVICON_URL:"streamFaviconUrl",PRIORITY:"priority",ID:"id",USER_ID:"userId",APP_ID:"appId",POSTED_TIME:"postedTime"};
opensocial.Activity.prototype.getId=function(){return this.getField(opensocial.Activity.Field.ID)
};
opensocial.Activity.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.Activity.prototype.setField=function(a,b){return(this.fields_[a]=b)
};;
opensocial.Address=function(a){this.fields_=a||{}
};
opensocial.Address.Field={TYPE:"type",UNSTRUCTURED_ADDRESS:"unstructuredAddress",PO_BOX:"poBox",STREET_ADDRESS:"streetAddress",EXTENDED_ADDRESS:"extendedAddress",REGION:"region",LOCALITY:"locality",POSTAL_CODE:"postalCode",COUNTRY:"country",LATITUDE:"latitude",LONGITUDE:"longitude"};
opensocial.Address.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};;
opensocial.Album=function(a){this.fields_=a||{}
};
opensocial.Album.Field={DESCRIPTION:"description",ID:"id",LOCATION:"location",MEDIA_ITEM_COUNT:"mediaItemCount",MEDIA_MIME_TYPE:"mediaMimeType",MEDIA_TYPE:"mediaType",OWNER_ID:"ownerId",THUMBNAIL_URL:"thumbnailUrl",TITLE:"title"};
opensocial.Album.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.Album.prototype.setField=function(a,b){return this.fields_[a]=b
};;
opensocial.BodyType=function(a){this.fields_=a||{}
};
opensocial.BodyType.Field={BUILD:"build",HEIGHT:"height",WEIGHT:"weight",EYE_COLOR:"eyeColor",HAIR_COLOR:"hairColor"};
opensocial.BodyType.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};;
opensocial.Collection=function(c,b,a){this.array_=c||[];
this.offset_=b||0;
this.totalSize_=a||this.array_.length
};
opensocial.Collection.prototype.getById=function(c){for(var a=0;
a<this.size();
a++){var b=this.array_[a];
if(b.getId()===c){return b
}}return null
};
opensocial.Collection.prototype.size=function(){return this.array_.length
};
opensocial.Collection.prototype.each=function(b){for(var a=0;
a<this.size();
a++){b(this.array_[a])
}};
opensocial.Collection.prototype.asArray=function(){return this.array_
};
opensocial.Collection.prototype.getTotalSize=function(){return this.totalSize_
};
opensocial.Collection.prototype.getOffset=function(){return this.offset_
};;
opensocial.Container=function(){};
opensocial.Container.container_=null;
opensocial.Container.setContainer=function(a){opensocial.Container.container_=a
};
opensocial.Container.get=function(){return opensocial.Container.container_
};
opensocial.Container.prototype.getEnvironment=function(){};
opensocial.Container.prototype.requestSendMessage=function(a,d,b,c){gadgets.rpc.call(null,"requestSendMessage",b,a,d,b,c)
};
opensocial.Container.prototype.requestShareApp=function(a,d,b,c){if(b){window.setTimeout(function(){b(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.NOT_IMPLEMENTED,null))
},0)
}};
opensocial.Container.prototype.requestCreateActivity=function(c,b,a){if(a){window.setTimeout(function(){a(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.NOT_IMPLEMENTED,null))
},0)
}};
opensocial.Container.prototype.hasPermission=function(a){return false
};
opensocial.Container.prototype.requestPermission=function(b,c,a){if(a){window.setTimeout(function(){a(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.NOT_IMPLEMENTED,null))
},0)
}};
opensocial.Container.prototype.requestData=function(a,b){};
opensocial.Container.prototype.newCreateAlbumRequest=function(b,a){};
opensocial.Container.prototype.newCreateMediaItemRequest=function(a,c,b){};
opensocial.Container.prototype.newDeleteAlbumRequest=function(a,b){};
opensocial.Container.prototype.newFetchPersonRequest=function(b,a){};
opensocial.Container.prototype.newFetchPeopleRequest=function(a,b){};
opensocial.Container.prototype.newFetchPersonAppDataRequest=function(a,c,b){};
opensocial.Container.prototype.newUpdatePersonAppDataRequest=function(a,b){};
opensocial.Container.prototype.newRemovePersonAppDataRequest=function(a){};
opensocial.Container.prototype.newUpdateAlbumRequest=function(b,c,a){};
opensocial.Container.prototype.newUpdateMediaItemRequest=function(b,d,c,a){};
opensocial.Container.prototype.newFetchActivitiesRequest=function(a,b){};
opensocial.Container.prototype.newFetchAlbumsRequest=function(a,b){};
opensocial.Container.prototype.newFetchMediaItemsRequest=function(a,b){};
opensocial.Container.prototype.newFetchMessageCollectionsRequest=function(a,b){};
opensocial.Container.prototype.newFetchMessagesRequest=function(a,c,b){};
opensocial.Container.prototype.newCollection=function(c,b,a){return new opensocial.Collection(c,b,a)
};
opensocial.Container.prototype.newPerson=function(a,b,c){return new opensocial.Person(a,b,c)
};
opensocial.Container.prototype.newActivity=function(a){return new opensocial.Activity(a)
};
opensocial.Container.prototype.newAlbum=function(a){return new opensocial.Album(a)
};
opensocial.Container.prototype.newMediaItem=function(c,a,b){return new opensocial.MediaItem(c,a,b)
};
opensocial.Container.prototype.newMessage=function(a,b){return new opensocial.Message(a,b)
};
opensocial.Container.prototype.newIdSpec=function(a){return new opensocial.IdSpec(a)
};
opensocial.Container.prototype.newNavigationParameters=function(a){return new opensocial.NavigationParameters(a)
};
opensocial.Container.prototype.newResponseItem=function(a,c,b,d){return new opensocial.ResponseItem(a,c,b,d)
};
opensocial.Container.prototype.newDataResponse=function(a,b){return new opensocial.DataResponse(a,b)
};
opensocial.Container.prototype.newDataRequest=function(){return new opensocial.DataRequest()
};
opensocial.Container.prototype.newEnvironment=function(b,a){return new opensocial.Environment(b,a)
};
opensocial.Container.prototype.invalidateCache=function(){};
opensocial.Container.isArray=function(a){return a instanceof Array
};
opensocial.Container.getField=function(a,b,c){var d=a[b];
return opensocial.Container.escape(d,c,false)
};
opensocial.Container.escape=function(c,b,a){if(b&&b[opensocial.DataRequest.DataRequestFields.ESCAPE_TYPE]==opensocial.EscapeType.NONE){return c
}else{return gadgets.util.escape(c,a)
}};;
opensocial.DataRequest=function(){this.requestObjects_=[]
};
opensocial.DataRequest.prototype.requestObjects_=null;
opensocial.DataRequest.prototype.getRequestObjects=function(){return this.requestObjects_
};
opensocial.DataRequest.prototype.add=function(b,a){return this.requestObjects_.push({key:a,request:b})
};
opensocial.DataRequest.prototype.send=function(a){var b=a||function(){};
opensocial.Container.get().requestData(this,b)
};
opensocial.DataRequest.SortOrder={TOP_FRIENDS:"topFriends",NAME:"name"};
opensocial.DataRequest.FilterType={ALL:"all",HAS_APP:"hasApp",TOP_FRIENDS:"topFriends",IS_FRIENDS_WITH:"isFriendsWith"};
opensocial.DataRequest.PeopleRequestFields={PROFILE_DETAILS:"profileDetail",SORT_ORDER:"sortOrder",FILTER:"filter",FILTER_OPTIONS:"filterOptions",FIRST:"first",MAX:"max",APP_DATA:"appData",ESCAPE_TYPE:"escapeType"};
opensocial.DataRequest.prototype.addDefaultParam=function(c,b,a){c[b]=c[b]||a
};
opensocial.DataRequest.prototype.addDefaultProfileFields=function(b){var a=opensocial.DataRequest.PeopleRequestFields;
var c=b[a.PROFILE_DETAILS]||[];
b[a.PROFILE_DETAILS]=c.concat([opensocial.Person.Field.ID,opensocial.Person.Field.NAME,opensocial.Person.Field.THUMBNAIL_URL])
};
opensocial.DataRequest.prototype.asArray=function(a){if(opensocial.Container.isArray(a)){return a
}else{return[a]
}};
opensocial.DataRequest.prototype.newCreateAlbumRequest=function(b,a){return opensocial.Container.get().newCreateAlbumRequest(b,a)
};
opensocial.DataRequest.prototype.newCreateMediaItemRequest=function(a,c,b){return opensocial.Container.get().newCreateMediaItemRequest(a,c,b)
};
opensocial.DataRequest.prototype.newDeleteAlbumRequest=function(a,b){return opensocial.Container.get().newDeleteAlbumRequest(a,b)
};
opensocial.DataRequest.prototype.newFetchPersonRequest=function(b,a){a=a||{};
this.addDefaultProfileFields(a);
return opensocial.Container.get().newFetchPersonRequest(b,a)
};
opensocial.DataRequest.prototype.newFetchPeopleRequest=function(b,c){c=c||{};
var a=opensocial.DataRequest.PeopleRequestFields;
this.addDefaultProfileFields(c);
this.addDefaultParam(c,a.SORT_ORDER,opensocial.DataRequest.SortOrder.TOP_FRIENDS);
this.addDefaultParam(c,a.FILTER,opensocial.DataRequest.FilterType.ALL);
this.addDefaultParam(c,a.FIRST,0);
this.addDefaultParam(c,a.MAX,20);
return opensocial.Container.get().newFetchPeopleRequest(b,c)
};
opensocial.DataRequest.AlbumRequestFields={FIRST:"first",MAX:"max"};
opensocial.DataRequest.MediaItemRequestFields={FIRST:"first",MAX:"max"};
opensocial.DataRequest.DataRequestFields={ESCAPE_TYPE:"escapeType"};
opensocial.DataRequest.prototype.newFetchPersonAppDataRequest=function(a,c,b){return opensocial.Container.get().newFetchPersonAppDataRequest(a,this.asArray(c),b)
};
opensocial.DataRequest.prototype.newUpdateAlbumRequest=function(a,b,c){return opensocial.Container.get().newUpdateAlbumRequest(a,b,c)
};
opensocial.DataRequest.prototype.newUpdateMediaItemRequest=function(a,c,b,d){return opensocial.Container.get().newUpdateMediaItemRequest(a,c,b,d)
};
opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest=function(a,b){return opensocial.Container.get().newUpdatePersonAppDataRequest(a,b)
};
opensocial.DataRequest.prototype.newRemovePersonAppDataRequest=function(a){return opensocial.Container.get().newRemovePersonAppDataRequest(a)
};
opensocial.DataRequest.ActivityRequestFields={APP_ID:"appId",FIRST:"first",MAX:"max"};
opensocial.DataRequest.prototype.newFetchActivitiesRequest=function(b,c){c=c||{};
var a=opensocial.DataRequest.ActivityRequestFields;
this.addDefaultParam(c,a.FIRST,0);
this.addDefaultParam(c,a.MAX,20);
return opensocial.Container.get().newFetchActivitiesRequest(b,c)
};
opensocial.DataRequest.prototype.newFetchAlbumsRequest=function(b,c){c=c||{};
var a=opensocial.DataRequest.AlbumRequestFields;
this.addDefaultParam(c,a.FIRST,0);
this.addDefaultParam(c,a.MAX,20);
return opensocial.Container.get().newFetchAlbumsRequest(b,c)
};
opensocial.DataRequest.prototype.newFetchMediaItemsRequest=function(b,c,d){d=d||{};
var a=opensocial.DataRequest.MediaItemRequestFields;
this.addDefaultParam(d,a.FIRST,0);
this.addDefaultParam(d,a.MAX,20);
return opensocial.Container.get().newFetchMediaItemsRequest(b,c,d)
};
opensocial.DataRequest.prototype.newFetchMessageCollectionsRequest=function(a,b){b=b||{};
return opensocial.Container.get().newFetchMessageCollectionsRequest(a,b)
};
opensocial.DataRequest.prototype.newFetchMessagesRequest=function(a,c,b){b=b||{};
return opensocial.Container.get().newFetchMessagesRequest(a,c,b)
};;
opensocial.DataResponse=function(a,b,c){this.responseItems_=a;
this.globalError_=b;
this.errorMessage_=c
};
opensocial.DataResponse.prototype.hadError=function(){return !!this.globalError_
};
opensocial.DataResponse.prototype.getErrorMessage=function(){return this.errorMessage_
};
opensocial.DataResponse.prototype.get=function(a){return this.responseItems_[a]
};;
opensocial.Email=function(a){this.fields_=a||{}
};
opensocial.Email.Field={TYPE:"type",ADDRESS:"address"};
opensocial.Email.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};;
opensocial.Enum=function(b,a){this.key=b;
this.displayValue=a
};
opensocial.Enum.prototype.getKey=function(){return gadgets.util.escape(this.key)
};
opensocial.Enum.prototype.getDisplayValue=function(){return gadgets.util.escape(this.displayValue)
};
opensocial.Enum.Smoker={NO:"NO",YES:"YES",SOCIALLY:"SOCIALLY",OCCASIONALLY:"OCCASIONALLY",REGULARLY:"REGULARLY",HEAVILY:"HEAVILY",QUITTING:"QUITTING",QUIT:"QUIT"};
opensocial.Enum.Drinker={NO:"NO",YES:"YES",SOCIALLY:"SOCIALLY",OCCASIONALLY:"OCCASIONALLY",REGULARLY:"REGULARLY",HEAVILY:"HEAVILY",QUITTING:"QUITTING",QUIT:"QUIT"};
opensocial.Enum.Gender={MALE:"MALE",FEMALE:"FEMALE"};
opensocial.Enum.LookingFor={DATING:"DATING",FRIENDS:"FRIENDS",RELATIONSHIP:"RELATIONSHIP",NETWORKING:"NETWORKING",ACTIVITY_PARTNERS:"ACTIVITY_PARTNERS",RANDOM:"RANDOM"};
opensocial.Enum.Presence={AWAY:"AWAY",CHAT:"CHAT",DND:"DND",OFFLINE:"OFFLINE",ONLINE:"ONLINE",XA:"XA"};;
opensocial.Environment=function(b,a){this.domain=b;
this.supportedFields=a
};
opensocial.Environment.prototype.getDomain=function(){return this.domain
};
opensocial.Environment.ObjectType={PERSON:"person",ADDRESS:"address",BODY_TYPE:"bodyType",EMAIL:"email",NAME:"name",ORGANIZATION:"organization",PHONE:"phone",URL:"url",ACTIVITY:"activity",MEDIA_ITEM:"mediaItem",MESSAGE:"message",MESSAGE_TYPE:"messageType",SORT_ORDER:"sortOrder",FILTER_TYPE:"filterType"};
opensocial.Environment.prototype.supportsField=function(a,c){var b=this.supportedFields[a]||[];
return !!b[c]
};;
opensocial.IdSpec=function(a){this.fields_=a||{}
};
opensocial.IdSpec.Field={USER_ID:"userId",GROUP_ID:"groupId",NETWORK_DISTANCE:"networkDistance"};
opensocial.IdSpec.PersonId={OWNER:"OWNER",VIEWER:"VIEWER"};
opensocial.IdSpec.GroupId={SELF:"SELF",FRIENDS:"FRIENDS",ALL:"ALL"};
opensocial.IdSpec.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.IdSpec.prototype.setField=function(a,b){return(this.fields_[a]=b)
};;
opensocial.MediaItem=function(d,b,c){this.fields_={};
if(c){for(var a in c){if(c.hasOwnProperty(a)){this.fields_[a]=c[a]
}}}this.fields_[opensocial.MediaItem.Field.MIME_TYPE]=d;
this.fields_[opensocial.MediaItem.Field.URL]=b
};
opensocial.MediaItem.Type={IMAGE:"image",VIDEO:"video",AUDIO:"audio"};
opensocial.MediaItem.Field={ALBUM_ID:"albumId",CREATED:"created",DESCRIPTION:"description",DURATION:"duration",FILE_SIZE:"fileSize",ID:"id",LANGUAGE:"language",LAST_UPDATED:"lastUpdated",LOCATION:"location",MIME_TYPE:"mimeType",NUM_COMMENTS:"numComments",NUM_VIEWS:"numViews",NUM_VOTES:"numVotes",RATING:"rating",START_TIME:"startTime",TAGGED_PEOPLE:"taggedPeople",TAGS:"tags",THUMBNAIL_URL:"thumbnailUrl",TITLE:"title",TYPE:"type",URL:"url"};
opensocial.MediaItem.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.MediaItem.prototype.setField=function(a,b){return(this.fields_[a]=b)
};;
opensocial.MessageCollection=function(a){this.fields_=a||{}
};
opensocial.MessageCollection.Field={ID:"id",TITLE:"title",TOTAL:"total",UNREAD:"unread",UPDATED:"updated",URLS:"urls"};
opensocial.MessageCollection.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.MessageCollection.prototype.setField=function(a,b){return this.fields_[a]=b
};;
opensocial.Message=function(a,b){if(typeof a=="string"){this.fields_=b||{};
this.fields_[opensocial.Message.Field.BODY]=a
}else{this.fields_=a||{}
}};
opensocial.Message.Field={APP_URL:"appUrl",BODY:"body",BODY_ID:"bodyId",COLLECTION_IDS:"collectionIds",ID:"id",PARENT_ID:"parentId",RECIPIENTS:"recipients",SENDER_ID:"senderId",STATUS:"status",TIME_SENT:"timeSent",TITLE:"title",TITLE_ID:"titleId",TYPE:"type",UPDATED:"updated",URLS:"urls"};
opensocial.Message.Type={EMAIL:"email",NOTIFICATION:"notification",PRIVATE_MESSAGE:"privateMessage",PUBLIC_MESSAGE:"publicMessage"};
opensocial.Message.Status={NEW:"new",DELETED:"deleted",FLAGGED:"flagged"};
opensocial.Message.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.Message.prototype.setField=function(a,b){return(this.fields_[a]=b)
};;
opensocial.Name=function(a){this.fields_=a||{}
};
opensocial.Name.Field={FAMILY_NAME:"familyName",GIVEN_NAME:"givenName",ADDITIONAL_NAME:"additionalName",HONORIFIC_PREFIX:"honorificPrefix",HONORIFIC_SUFFIX:"honorificSuffix",UNSTRUCTURED:"unstructured"};
opensocial.Name.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};;
opensocial.NavigationParameters=function(a){this.fields_=a||{}
};
opensocial.NavigationParameters.Field={VIEW:"view",OWNER:"owner",PARAMETERS:"parameters"};
opensocial.NavigationParameters.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.NavigationParameters.prototype.setField=function(a,b){return(this.fields_[a]=b)
};
opensocial.NavigationParameters.DestinationType={VIEWER_DESTINATION:"viewerDestination",RECIPIENT_DESTINATION:"recipientDestination"};;
opensocial.Organization=function(a){this.fields_=a||{}
};
opensocial.Organization.Field={NAME:"name",TITLE:"title",DESCRIPTION:"description",FIELD:"field",SUB_FIELD:"subField",START_DATE:"startDate",END_DATE:"endDate",SALARY:"salary",ADDRESS:"address",WEBPAGE:"webpage"};
opensocial.Organization.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};;
opensocial.Person=function(a,b,c){this.fields_=a||{};
this.isOwner_=b;
this.isViewer_=c
};
opensocial.Person.Field={ID:"id",NAME:"name",NICKNAME:"nickname",THUMBNAIL_URL:"thumbnailUrl",PROFILE_URL:"profileUrl",CURRENT_LOCATION:"currentLocation",ADDRESSES:"addresses",EMAILS:"emails",PHONE_NUMBERS:"phoneNumbers",ABOUT_ME:"aboutMe",STATUS:"status",PROFILE_SONG:"profileSong",PROFILE_VIDEO:"profileVideo",GENDER:"gender",SEXUAL_ORIENTATION:"sexualOrientation",RELATIONSHIP_STATUS:"relationshipStatus",AGE:"age",DATE_OF_BIRTH:"dateOfBirth",BODY_TYPE:"bodyType",ETHNICITY:"ethnicity",SMOKER:"smoker",DRINKER:"drinker",CHILDREN:"children",PETS:"pets",LIVING_ARRANGEMENT:"livingArrangement",TIME_ZONE:"timeZone",LANGUAGES_SPOKEN:"languagesSpoken",JOBS:"jobs",JOB_INTERESTS:"jobInterests",SCHOOLS:"schools",INTERESTS:"interests",URLS:"urls",MUSIC:"music",MOVIES:"movies",TV_SHOWS:"tvShows",BOOKS:"books",ACTIVITIES:"activities",SPORTS:"sports",HEROES:"heroes",QUOTES:"quotes",CARS:"cars",FOOD:"food",TURN_ONS:"turnOns",TURN_OFFS:"turnOffs",TAGS:"tags",ROMANCE:"romance",SCARED_OF:"scaredOf",HAPPIEST_WHEN:"happiestWhen",FASHION:"fashion",HUMOR:"humor",LOOKING_FOR:"lookingFor",RELIGION:"religion",POLITICAL_VIEWS:"politicalViews",HAS_APP:"hasApp",NETWORK_PRESENCE:"networkPresence"};
opensocial.Person.prototype.getId=function(){return this.getField(opensocial.Person.Field.ID)
};
var ORDERED_NAME_FIELDS_=[opensocial.Name.Field.HONORIFIC_PREFIX,opensocial.Name.Field.GIVEN_NAME,opensocial.Name.Field.FAMILY_NAME,opensocial.Name.Field.HONORIFIC_SUFFIX,opensocial.Name.Field.ADDITIONAL_NAME];
opensocial.Person.prototype.getDisplayName=function(){var b=this.getField(opensocial.Person.Field.NAME);
if(b){var e=b.getField(opensocial.Name.Field.UNSTRUCTURED);
if(e){return e
}var d="";
for(var c=0;
c<ORDERED_NAME_FIELDS_.length;
c++){var a=b.getField(ORDERED_NAME_FIELDS_[c]);
if(a){d+=a+" "
}}return d.replace(/^\s+|\s+$/g,"")
}return this.getField(opensocial.Person.Field.NICKNAME)
};
opensocial.Person.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};
opensocial.Person.prototype.getAppData=function(a){};
opensocial.Person.prototype.isViewer=function(){return !!this.isViewer_
};
opensocial.Person.prototype.isOwner=function(){return !!this.isOwner_
};;
opensocial.Phone=function(a){this.fields_=a||{}
};
opensocial.Phone.Field={TYPE:"type",NUMBER:"number"};
opensocial.Phone.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};;
opensocial.ResponseItem=function(a,c,b,d){this.originalDataRequest_=a;
this.data_=c;
this.errorCode_=b;
this.errorMessage_=d
};
opensocial.ResponseItem.prototype.hadError=function(){return !!this.errorCode_
};
opensocial.ResponseItem.Error={NOT_IMPLEMENTED:"notImplemented",UNAUTHORIZED:"unauthorized",FORBIDDEN:"forbidden",BAD_REQUEST:"badRequest",INTERNAL_ERROR:"internalError",LIMIT_EXCEEDED:"limitExceeded"};
opensocial.ResponseItem.prototype.getErrorCode=function(){return this.errorCode_
};
opensocial.ResponseItem.prototype.getErrorMessage=function(){return this.errorMessage_
};
opensocial.ResponseItem.prototype.getOriginalDataRequest=function(){return this.originalDataRequest_
};
opensocial.ResponseItem.prototype.getData=function(){return this.data_
};;
opensocial.Url=function(a){this.fields_=a||{}
};
opensocial.Url.Field={TYPE:"type",LINK_TEXT:"linkText",ADDRESS:"address"};
opensocial.Url.prototype.getField=function(a,b){return opensocial.Container.getField(this.fields_,a,b)
};;
tamings___.push(function(a){caja___.whitelistCtors([[window,"JsonRpcRequestItem",Object],[opensocial,"Activity",Object],[opensocial,"Address",Object],[opensocial,"Album",Object],[opensocial,"BodyType",Object],[opensocial,"Container",Object],[opensocial,"Collection",Object],[opensocial,"DataRequest",Object],[opensocial,"DataResponse",Object],[opensocial,"Email",Object],[opensocial,"Enum",Object],[opensocial,"Environment",Object],[opensocial,"IdSpec",Object],[opensocial,"MediaItem",Object],[opensocial,"Message",Object],[opensocial,"MessageCollection",Object],[opensocial,"Name",Object],[opensocial,"NavigationParameters",Object],[opensocial,"Organization",Object],[opensocial,"Person",Object],[opensocial,"Phone",Object],[opensocial,"ResponseItem",Object],[opensocial,"Url",Object]]);
caja___.whitelistMeths([[JsonPerson,"getDisplayName"],[JsonPerson,"getAppData"],[opensocial.Activity,"getField"],[opensocial.Activity,"getId"],[opensocial.Activity,"setField"],[opensocial.Address,"getField"],[opensocial.Album,"getField"],[opensocial.Album,"setField"],[opensocial.BodyType,"getField"],[opensocial.Container,"getEnvironment"],[opensocial.Container,"requestSendMessage"],[opensocial.Container,"requestShareApp"],[opensocial.Container,"requestCreateActivity"],[opensocial.Container,"hasPermission"],[opensocial.Container,"requestPermission"],[opensocial.Container,"requestData"],[opensocial.Container,"newCreateAlbumRequest"],[opensocial.Container,"newCreateMediaItemRequest"],[opensocial.Container,"newDeleteAlbumRequest"],[opensocial.Container,"newFetchPersonRequest"],[opensocial.Container,"newFetchPeopleRequest"],[opensocial.Container,"newFetchPersonAppDataRequest"],[opensocial.Container,"newUpdatePersonAppDataRequest"],[opensocial.Container,"newRemovePersonAppDataRequest"],[opensocial.Container,"newUpdateAlbumRequest"],[opensocial.Container,"newUpdateMediaItemRequest"],[opensocial.Container,"newFetchActivitiesRequest"],[opensocial.Container,"newFetchAlbumsRequest"],[opensocial.Container,"newFetchMediaItemsRequest"],[opensocial.Container,"newFetchMessageCollectionsRequest"],[opensocial.Container,"newFetchMessagesRequest"],[opensocial.Container,"newCollection"],[opensocial.Container,"newPerson"],[opensocial.Container,"newActivity"],[opensocial.Container,"newAlbum"],[opensocial.Container,"newMediaItem"],[opensocial.Container,"newMessage"],[opensocial.Container,"newIdSpec"],[opensocial.Container,"newNavigationParameters"],[opensocial.Container,"newResponseItem"],[opensocial.Container,"newDataResponse"],[opensocial.Container,"newDataRequest"],[opensocial.Container,"newEnvironment"],[opensocial.Container,"invalidateCache"],[opensocial.Collection,"asArray"],[opensocial.Collection,"each"],[opensocial.Collection,"getById"],[opensocial.Collection,"getOffset"],[opensocial.Collection,"getTotalSize"],[opensocial.Collection,"size"],[opensocial.DataRequest,"add"],[opensocial.DataRequest,"newCreateAlbumRequest"],[opensocial.DataRequest,"newCreateMediaItemRequest"],[opensocial.DataRequest,"newDeleteAlbumRequest"],[opensocial.DataRequest,"newFetchActivitiesRequest"],[opensocial.DataRequest,"newFetchAlbumsRequest"],[opensocial.DataRequest,"newFetchMediaItemsRequest"],[opensocial.DataRequest,"newFetchPeopleRequest"],[opensocial.DataRequest,"newFetchPersonAppDataRequest"],[opensocial.DataRequest,"newUpdateAlbumRequest"],[opensocial.DataRequest,"newUpdateMediaItemRequest"],[opensocial.DataRequest,"newFetchPersonRequest"],[opensocial.DataRequest,"newRemovePersonAppDataRequest"],[opensocial.DataRequest,"newUpdatePersonAppDataRequest"],[opensocial.DataRequest,"send"],[opensocial.DataResponse,"get"],[opensocial.DataResponse,"getErrorMessage"],[opensocial.DataResponse,"hadError"],[opensocial.Email,"getField"],[opensocial.Enum,"getDisplayValue"],[opensocial.Enum,"getKey"],[opensocial.Environment,"getDomain"],[opensocial.Environment,"supportsField"],[opensocial.IdSpec,"getField"],[opensocial.IdSpec,"setField"],[opensocial.MediaItem,"getField"],[opensocial.MediaItem,"setField"],[opensocial.Message,"getField"],[opensocial.Message,"setField"],[opensocial.Name,"getField"],[opensocial.NavigationParameters,"getField"],[opensocial.NavigationParameters,"setField"],[opensocial.Organization,"getField"],[opensocial.Person,"getDisplayName"],[opensocial.Person,"getField"],[opensocial.Person,"getId"],[opensocial.Person,"isOwner"],[opensocial.Person,"isViewer"],[opensocial.Phone,"getField"],[opensocial.ResponseItem,"getData"],[opensocial.ResponseItem,"getErrorCode"],[opensocial.ResponseItem,"getErrorMessage"],[opensocial.ResponseItem,"getOriginalDataRequest"],[opensocial.ResponseItem,"hadError"],[opensocial.Url,"getField"]]);
caja___.whitelistFuncs([[opensocial.Container,"setContainer"],[opensocial.Container,"get"],[opensocial.Container,"getField"],[opensocial,"getEnvironment"],[opensocial,"hasPermission"],[opensocial,"newActivity"],[opensocial,"newAlbum"],[opensocial,"newDataRequest"],[opensocial,"newIdSpec"],[opensocial,"newMediaItem"],[opensocial,"newMessage"],[opensocial,"newNavigationParameters"],[opensocial,"requestCreateActivity"],[opensocial,"requestPermission"],[opensocial,"requestSendMessage"],[opensocial,"requestShareApp"]]);
caja___.whitelistProps([[opensocial,"CreateActivityPriority"],[opensocial,"EscapeType"],[opensocial.Activity,"Field"],[opensocial.Address,"Field"],[opensocial.Album,"Field"],[opensocial.BodyType,"Field"],[opensocial.DataRequest,"ActivityRequestFields"],[opensocial.DataRequest,"DataRequestFields"],[opensocial.DataRequest,"FilterType"],[opensocial.DataRequest,"Group"],[opensocial.DataRequest,"PeopleRequestFields"],[opensocial.DataRequest,"SortOrder"],[opensocial.Email,"Field"],[opensocial.Enum,"Smoker"],[opensocial.Enum,"Drinker"],[opensocial.Enum,"Gender"],[opensocial.Enum,"LookingFor"],[opensocial.Enum,"Presence"],[opensocial.Environment,"ObjectType"],[opensocial.IdSpec,"Field"],[opensocial.IdSpec,"GroupId"],[opensocial.IdSpec,"PersonId"],[opensocial.MediaItem,"Field"],[opensocial.MediaItem,"Type"],[opensocial.Message,"Field"],[opensocial.Message,"Type"],[opensocial.MessageCollection,"Field"],[opensocial.Name,"Field"],[opensocial.NavigationParameters,"DestinationType"],[opensocial.NavigationParameters,"Field"],[opensocial.Organization,"Field"],[opensocial.Person,"Field"],[opensocial.Phone,"Field"],[opensocial.ResponseItem,"Error"],[opensocial.Url,"Field"]]);
caja___.whitelistProps([[JsonRpcRequestItem,"rpc"],[JsonRpcRequestItem,"processData"],[JsonRpcRequestItem,"processResponse"],[JsonRpcRequestItem,"errors"]])
});;
gadgets.rpc.register("update_security_token",function(a){shindig.auth.updateSecurityToken(a)
});;
(function(){var i=null;
var j={};
var f=gadgets.util.escapeString;
var d={};
var h={};
var e="en";
var b="US";
var a=0;
function c(){var l=gadgets.util.getUrlParameters();
for(var k in l){if(l.hasOwnProperty(k)){if(k.indexOf("up_")===0&&k.length>3){j[k.substr(3)]=String(l[k])
}else{if(k==="country"){b=l[k]
}else{if(k==="lang"){e=l[k]
}else{if(k==="mid"){a=l[k]
}}}}}}}function g(){for(var k in h){if(typeof j[k]==="undefined"){j[k]=h[k]
}}}gadgets.Prefs=function(){if(!i){c();
g();
i=this
}return i
};
gadgets.Prefs.setInternal_=function(n,p){var o=false;
if(typeof n==="string"){if(!j.hasOwnProperty(n)||j[n]!==p){o=true
}j[n]=p
}else{for(var m in n){if(n.hasOwnProperty(m)){var l=n[m];
if(!j.hasOwnProperty(m)||j[m]!==l){o=true
}j[m]=l
}}}return o
};
gadgets.Prefs.setMessages_=function(k){d=k
};
gadgets.Prefs.setDefaultPrefs_=function(k){h=k
};
gadgets.Prefs.prototype.getString=function(k){if(k===".lang"){k="lang"
}return j[k]?f(j[k]):""
};
gadgets.Prefs.prototype.setDontEscape_=function(){f=function(l){return l
}
};
gadgets.Prefs.prototype.getInt=function(k){var l=parseInt(j[k],10);
return isNaN(l)?0:l
};
gadgets.Prefs.prototype.getFloat=function(k){var l=parseFloat(j[k]);
return isNaN(l)?0:l
};
gadgets.Prefs.prototype.getBool=function(k){var l=j[k];
if(l){return l==="true"||l===true||!!parseInt(l,10)
}return false
};
gadgets.Prefs.prototype.set=function(k,l){throw new Error("setprefs feature required to make this call.")
};
gadgets.Prefs.prototype.getArray=function(n){var o=j[n];
if(o){var k=o.split("|");
for(var m=0,l=k.length;
m<l;
++m){k[m]=f(k[m].replace(/%7C/g,"|"))
}return k
}return[]
};
gadgets.Prefs.prototype.setArray=function(k,l){throw new Error("setprefs feature required to make this call.")
};
gadgets.Prefs.prototype.getMsg=function(k){return d[k]||""
};
gadgets.Prefs.prototype.getCountry=function(){return b
};
gadgets.Prefs.prototype.getLang=function(){return e
};
gadgets.Prefs.prototype.getModuleId=function(){return a
}
})();;
tamings___.push(function(a){caja___.whitelistCtors([[gadgets,"Prefs",Object]]);
caja___.whitelistMeths([[gadgets.Prefs,"getArray"],[gadgets.Prefs,"getBool"],[gadgets.Prefs,"getCountry"],[gadgets.Prefs,"getFloat"],[gadgets.Prefs,"getInt"],[gadgets.Prefs,"getLang"],[gadgets.Prefs,"getMsg"],[gadgets.Prefs,"getString"],[gadgets.Prefs,"set"],[gadgets.Prefs,"setArray"]])
});;
gadgets.io=function(){var config={};
var oauthState;
function makeXhr(){var x;
var wrapperXhr=window.shindig&&window.shindig["xhrwrapper"]&&window.shindig["xhrwrapper"]["createXHR"];
if(wrapperXhr){return wrapperXhr()
}else{if(typeof ActiveXObject!="undefined"){x=new ActiveXObject("Msxml2.XMLHTTP");
if(!x){x=new ActiveXObject("Microsoft.XMLHTTP")
}return x
}else{if(typeof XMLHttpRequest!="undefined"||window.XMLHttpRequest){return new window.XMLHttpRequest()
}else{throw ("no xhr available")
}}}}function hadError(xobj,callback){if(xobj.readyState!==4){return true
}try{if(xobj.status!==200){var error=(""+xobj.status);
if(xobj.responseText){error=error+" "+xobj.responseText
}callback({errors:[error],rc:xobj.status,text:xobj.responseText});
return true
}}catch(e){callback({errors:[e.number+" Error not specified"],rc:e.number,text:e.description});
return true
}return false
}function processNonProxiedResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var data={body:xobj.responseText};
callback(transformResponseData(params,data))
}var UNPARSEABLE_CRUFT="throw 1; < don't be evil' >";
function processResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return
}var txt=xobj.responseText;
var offset=txt.indexOf(UNPARSEABLE_CRUFT)+UNPARSEABLE_CRUFT.length;
if(offset<UNPARSEABLE_CRUFT.length){return
}txt=txt.substr(offset);
var data=eval("("+txt+")");
data=data[url];
if(data.oauthState){oauthState=data.oauthState
}if(data.st){shindig.auth.updateSecurityToken(data.st)
}callback(transformResponseData(params,data))
}function transformResponseData(params,data){var resp={text:data.body,rc:data.rc||200,headers:data.headers,oauthApprovalUrl:data.oauthApprovalUrl,oauthError:data.oauthError,oauthErrorText:data.oauthErrorText,errors:[]};
if(resp.rc<200||resp.rc>=400){resp.errors=[resp.rc+" Error"]
}else{if(resp.text){if(resp.rc>=300&&resp.rc<400){params.CONTENT_TYPE="TEXT"
}switch(params.CONTENT_TYPE){case"JSON":case"FEED":resp.data=gadgets.json.parse(resp.text);
if(!resp.data){resp.errors.push("500 Failed to parse JSON");
resp.rc=500;
resp.data=null
}break;
case"DOM":var dom;
if(typeof ActiveXObject!="undefined"){dom=new ActiveXObject("Microsoft.XMLDOM");
dom.async=false;
dom.validateOnParse=false;
dom.resolveExternals=false;
if(!dom.loadXML(resp.text)){resp.errors.push("500 Failed to parse XML");
resp.rc=500
}else{resp.data=dom
}}else{var parser=new DOMParser();
dom=parser.parseFromString(resp.text,"text/xml");
if("parsererror"===dom.documentElement.nodeName){resp.errors.push("500 Failed to parse XML");
resp.rc=500
}else{resp.data=dom
}}break;
default:resp.data=resp.text;
break
}}}return resp
}function makeXhrRequest(realUrl,proxyUrl,callback,paramData,method,params,processResponseFunction,opt_headers){var xhr=makeXhr();
if(proxyUrl.indexOf("//")==0){proxyUrl=document.location.protocol+proxyUrl
}xhr.open(method,proxyUrl,true);
if(callback){xhr.onreadystatechange=gadgets.util.makeClosure(null,processResponseFunction,realUrl,callback,params,xhr)
}if(paramData!==null){var contentTypeHeader="Content-Type";
var contentType="application/x-www-form-urlencoded";
if(typeof opt_headers==="string"){contentType=opt_headers;
opt_headers={}
}var headers=opt_headers||{};
if(!headers[contentTypeHeader]){headers[contentTypeHeader]=contentType
}for(var headerName in headers){xhr.setRequestHeader(headerName,headers[headerName])
}}xhr.send(paramData)
}function respondWithPreload(postData,params,callback){if(gadgets.io.preloaded_&&postData.httpMethod==="GET"){for(var i=0;
i<gadgets.io.preloaded_.length;
i++){var preload=gadgets.io.preloaded_[i];
if(preload&&(preload.id===postData.url)){delete gadgets.io.preloaded_[i];
if(preload.rc!==200){callback({rc:preload.rc,errors:[preload.rc+" Error"]})
}else{if(preload.oauthState){oauthState=preload.oauthState
}var resp={body:preload.body,rc:preload.rc,headers:preload.headers,oauthApprovalUrl:preload.oauthApprovalUrl,oauthError:preload.oauthError,oauthErrorText:preload.oauthErrorText,errors:[]};
callback(transformResponseData(params,resp))
}return true
}}}return false
}function init(configuration){config=configuration["core.io"]||{}
}gadgets.config.register("core.io",null,init);
return{makeRequest:function(url,callback,opt_params){var params=opt_params||{};
var httpMethod=params.METHOD||"GET";
var refreshInterval=params.REFRESH_INTERVAL;
var auth,st;
if(params.AUTHORIZATION&&params.AUTHORIZATION!=="NONE"){auth=params.AUTHORIZATION.toLowerCase();
st=shindig.auth.getSecurityToken()
}else{if(httpMethod==="GET"&&refreshInterval===undefined){refreshInterval=3600
}}var signOwner=true;
if(typeof params.OWNER_SIGNED!=="undefined"){signOwner=params.OWNER_SIGNED
}var signViewer=true;
if(typeof params.VIEWER_SIGNED!=="undefined"){signViewer=params.VIEWER_SIGNED
}var headers=params.HEADERS||{};
if(httpMethod==="POST"&&!headers["Content-Type"]){headers["Content-Type"]="application/x-www-form-urlencoded"
}var urlParams=gadgets.util.getUrlParameters();
var paramData={url:url,httpMethod:httpMethod,headers:gadgets.io.encodeValues(headers,false),postData:params.POST_DATA||"",authz:auth||"",st:st||"",contentType:params.CONTENT_TYPE||"TEXT",numEntries:params.NUM_ENTRIES||"3",getSummaries:!!params.GET_SUMMARIES,signOwner:signOwner,signViewer:signViewer,gadget:urlParams.url,container:urlParams.container||urlParams.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters()["nocache"]||"",getFullHeaders:!!params.GET_FULL_HEADERS};
if(auth==="oauth"||auth==="signed"){if(gadgets.io.oauthReceivedCallbackUrl_){paramData.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_;
gadgets.io.oauthReceivedCallbackUrl_=null
}paramData.oauthState=oauthState||"";
for(var opt in params){if(params.hasOwnProperty(opt)){if(opt.indexOf("OAUTH_")===0){paramData[opt]=params[opt]
}}}}var proxyUrl=config.jsonProxyUrl.replace("%host%",document.location.host);
if(!respondWithPreload(paramData,params,callback)){if(httpMethod==="GET"&&refreshInterval>0){var extraparams="?refresh="+refreshInterval+"&"+gadgets.io.encodeValues(paramData);
makeXhrRequest(url,proxyUrl+extraparams,callback,null,"GET",params,processResponse)
}else{makeXhrRequest(url,proxyUrl,callback,gadgets.io.encodeValues(paramData),"POST",params,processResponse)
}}},makeNonProxiedRequest:function(relativeUrl,callback,opt_params,opt_headers){var params=opt_params||{};
makeXhrRequest(relativeUrl,relativeUrl,callback,params.POST_DATA,params.METHOD,params,processNonProxiedResponse,opt_headers)
},clearOAuthState:function(){oauthState=undefined
},encodeValues:function(fields,opt_noEscaping){var escape=!opt_noEscaping;
var buf=[];
var first=false;
for(var i in fields){if(fields.hasOwnProperty(i)&&!/___$/.test(i)){if(!first){first=true
}else{buf.push("&")
}buf.push(escape?encodeURIComponent(String(i)):i);
buf.push("=");
buf.push(escape?encodeURIComponent(String(fields[i])):fields[i])
}}return buf.join("")
},getProxyUrl:function(url,opt_params){var params=opt_params||{};
var refresh=params.REFRESH_INTERVAL;
if(refresh===undefined){refresh="3600"
}var urlParams=gadgets.util.getUrlParameters();
var rewriteMimeParam=params.rewriteMime?"&rewriteMime="+encodeURIComponent(String(params.rewriteMime)):"";
var ret=config.proxyUrl.replace("%url%",encodeURIComponent(url)).replace("%host%",document.location.host).replace("%rawurl%",url).replace("%refresh%",encodeURIComponent(String(refresh))).replace("%gadget%",encodeURIComponent(urlParams.url)).replace("%container%",encodeURIComponent(urlParams.container||urlParams.synd||"default")).replace("%rewriteMime%",rewriteMimeParam);
if(ret.indexOf("//")==0){ret=window.location.protocol+ret
}return ret
}}
}();
gadgets.io.RequestParameters=gadgets.util.makeEnum(["METHOD","CONTENT_TYPE","POST_DATA","HEADERS","AUTHORIZATION","NUM_ENTRIES","GET_SUMMARIES","GET_FULL_HEADERS","REFRESH_INTERVAL","OAUTH_SERVICE_NAME","OAUTH_USE_TOKEN","OAUTH_TOKEN_NAME","OAUTH_REQUEST_TOKEN","OAUTH_REQUEST_TOKEN_SECRET","OAUTH_RECEIVED_CALLBACK"]);
gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);
gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);
gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH"]);;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.io,"encodeValues"],[gadgets.io,"getProxyUrl"],[gadgets.io,"makeRequest"]])
});;
window.FieldTranslations=(function(){function b(c){if(c){c.key=c.value
}}function a(c){if(c){c.address=c.value
}}return{translateEnumJson:b,translateUrlJson:a,translateServerPersonToJsPerson:function(l,d){if(l.emails){for(var g=0;
g<l.emails.length;
g++){l.emails[g].address=l.emails[g].value
}}if(l.phoneNumbers){for(var c=0;
c<l.phoneNumbers.length;
c++){l.phoneNumbers[c].number=l.phoneNumbers[c].value
}}if(l.birthday){l.dateOfBirth=l.birthday
}if(l.utcOffset){l.timeZone=l.utcOffset
}if(l.addresses){for(var f=0;
f<l.addresses.length;
f++){l.addresses[f].unstructuredAddress=l.addresses[f].formatted
}}if(l.gender){var h=l.gender=="male"?"MALE":(l.gender=="female")?"FEMALE":null;
l.gender={key:h,displayValue:l.gender}
}a(l.profileSong);
a(l.profileVideo);
if(l.urls){for(var k=0;
k<l.urls.length;
k++){a(l.urls[k])
}}b(l.drinker);
b(l.lookingFor);
b(l.networkPresence);
b(l.smoker);
if(l.organizations){l.jobs=[];
l.schools=[];
for(var e=0;
e<l.organizations.length;
e++){var m=l.organizations[e];
if(m.type=="job"){l.jobs.push(m)
}else{if(m.type=="school"){l.schools.push(m)
}}}}if(l.name){l.name.unstructured=l.name.formatted
}if(l.appData){l.appData=opensocial.Container.escape(l.appData,d,true)
}},translateJsPersonFieldsToServerFields:function(c){for(var d=0;
d<c.length;
d++){if(c[d]=="dateOfBirth"){c[d]="birthday"
}else{if(c[d]=="timeZone"){c[d]="utcOffset"
}else{if(c[d]=="jobs"){c[d]="organizations"
}else{if(c[d]=="schools"){c[d]="organizations"
}}}}}c.push("id");
c.push("displayName")
},translateIsoStringToDate:function(c){var f="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";
var i=c.match(new RegExp(f));
var h=0;
var e=new Date(i[1],0,1);
if(i[3]){e.setMonth(i[3]-1)
}if(i[5]){e.setDate(i[5])
}if(i[7]){e.setHours(i[7])
}if(i[8]){e.setMinutes(i[8])
}if(i[10]){e.setSeconds(i[10])
}if(i[12]){e.setMilliseconds(Number("0."+i[12])*1000)
}if(i[14]){h=(Number(i[16])*60)+Number(i[17]);
h*=((i[15]=="-")?1:-1)
}h-=e.getTimezoneOffset();
var g=(Number(e)+(h*60*1000));
return new Date(Number(g))
},addAppDataAsProfileFields:function(f){if(f){if(f.appData){var c=f.appData;
if(typeof c==="string"){c=[c]
}var e=f.profileDetail||[];
for(var d=0;
d<c.length;
d++){if(c[d]==="*"){e.push("appData")
}else{e.push("appData."+c[d])
}}f.appData=c
}}},translateStandardArguments:function(d,c){if(d.first){c.startIndex=d.first
}if(d.max){c.count=d.max
}if(d.sortOrder){c.sortBy=d.sortOrder
}if(d.filter){c.filterBy=d.filter
}if(d.filterOp){c.filterOp=d.filterOp
}if(d.filterValue){c.filterValue=d.filterValue
}if(d.fields){c.fields=d.fields
}},translateNetworkDistance:function(c,d){if(c.getField("networkDistance")){d.networkDistance=c.getField("networkDistance")
}}}
})();;
var JsonMediaItem=function(a){a=a||{};
opensocial.MediaItem.call(this,a.mimeType,a.url,a)
};
JsonMediaItem.inherits(opensocial.MediaItem);
JsonMediaItem.prototype.toJsonObject=function(){return JsonMediaItem.copyFields(this.fields_)
};
JsonMediaItem.copyFields=function(a){var b={};
for(var c in a){b[c]=a[c]
}return b
};;
var JsonAlbum=function(a){a=a||{};
JsonAlbum.constructObject(a,"location",opensocial.Address);
opensocial.Album.call(this,a)
};
JsonAlbum.inherits(opensocial.Album);
JsonAlbum.prototype.toJsonObject=function(){return JsonAlbum.copyFields(this.fields_)
};
JsonAlbum.constructObject=function(c,d,a){var b=c[d];
if(b){c[d]=new a(b)
}};
JsonAlbum.copyFields=function(a){var b={};
for(var c in a){b[c]=a[c]
}return b
};;
var JsonActivity=function(a,b){a=a||{};
if(!b){JsonActivity.constructArrayObject(a,"mediaItems",JsonMediaItem)
}opensocial.Activity.call(this,a)
};
JsonActivity.inherits(opensocial.Activity);
JsonActivity.prototype.toJsonObject=function(){var c=JsonActivity.copyFields(this.fields_);
var d=c.mediaItems||[];
var a=[];
for(var b=0;
b<d.length;
b++){a[b]=d[b].toJsonObject()
}c.mediaItems=a;
return c
};
JsonActivity.constructArrayObject=function(d,e,b){var c=d[e];
if(c){for(var a=0;
a<c.length;
a++){c[a]=new b(c[a])
}}};
JsonActivity.copyFields=function(a){var b={};
for(var c in a){b[c]=a[c]
}return b
};;
var JsonPerson=function(a){a=a||{};
JsonPerson.constructObject(a,"bodyType",opensocial.BodyType);
JsonPerson.constructObject(a,"currentLocation",opensocial.Address);
JsonPerson.constructObject(a,"name",opensocial.Name);
JsonPerson.constructObject(a,"profileSong",opensocial.Url);
JsonPerson.constructObject(a,"profileVideo",opensocial.Url);
JsonPerson.constructDate(a,"dateOfBirth");
JsonPerson.constructArrayObject(a,"addresses",opensocial.Address);
JsonPerson.constructArrayObject(a,"emails",opensocial.Email);
JsonPerson.constructArrayObject(a,"jobs",opensocial.Organization);
JsonPerson.constructArrayObject(a,"phoneNumbers",opensocial.Phone);
JsonPerson.constructArrayObject(a,"schools",opensocial.Organization);
JsonPerson.constructArrayObject(a,"urls",opensocial.Url);
JsonPerson.constructEnum(a,"gender");
JsonPerson.constructEnum(a,"smoker");
JsonPerson.constructEnum(a,"drinker");
JsonPerson.constructEnum(a,"networkPresence");
JsonPerson.constructEnumArray(a,"lookingFor");
opensocial.Person.call(this,a,a.isOwner,a.isViewer)
};
JsonPerson.inherits(opensocial.Person);
JsonPerson.constructEnum=function(b,c){var a=b[c];
if(a){b[c]=new opensocial.Enum(a.key,a.displayValue)
}};
JsonPerson.constructEnumArray=function(c,d){var b=c[d];
if(b){for(var a=0;
a<b.length;
a++){b[a]=new opensocial.Enum(b[a].key,b[a].displayValue)
}}};
JsonPerson.constructObject=function(c,d,a){var b=c[d];
if(b){c[d]=new a(b)
}};
JsonPerson.constructDate=function(b,c){var a=b[c];
if(a){b[c]=FieldTranslations.translateIsoStringToDate(a)
}};
JsonPerson.constructArrayObject=function(d,e,b){var c=d[e];
if(c){for(var a=0;
a<c.length;
a++){c[a]=new b(c[a])
}}};
JsonPerson.prototype.getDisplayName=function(){return this.getField("displayName")
};
JsonPerson.prototype.getAppData=function(b){var a=this.getField("appData");
return a&&a[b]
};;
var JsonMessageCollection=function(a){a=a||{};
opensocial.MessageCollection.call(this,a)
};
JsonMessageCollection.inherits(opensocial.MessageCollection);
JsonMessageCollection.prototype.toJsonObject=function(){return JsonMessageCollection.copyFields(this.fields_)
};
JsonMessageCollection.copyFields=function(a){var b={};
for(var c in a){b[c]=a[c]
}return b
};;
var JsonMessage=function(a,b){b=b||{};
opensocial.Message.call(this,a,b)
};
JsonMessage.inherits(opensocial.Message);
JsonMessage.prototype.toJsonObject=function(){return JsonMessage.copyFields(this.fields_)
};
JsonMessage.copyFields=function(a){var b={};
for(var c in a){b[c]=a[c]
}return b
};;
tamings___.push(function(a){caja___.whitelistCtors([[window,"JsonActivity",opensocial.Activity],[window,"JsonAlbum",opensocial.Album],[window,"JsonMediaItem",opensocial.MediaItem],[window,"JsonMessage",opensocial.Message],[window,"JsonMessageCollection",opensocial.MessageCollection],[window,"JsonPerson",opensocial.Person]]);
caja___.whitelistMeths([[JsonPerson,"getDisplayName"],[JsonPerson,"getAppData"]])
});;
var JsonRpcContainer=function(c){opensocial.Container.call(this);
var h=c.path;
this.path_=h.replace("%host%",document.location.host);
var f=c.invalidatePath;
this.invalidatePath_=f.replace("%host%",document.location.host);
var g=c.supportedFields;
var e={};
for(var b in g){if(g.hasOwnProperty(b)){e[b]={};
for(var d=0;
d<g[b].length;
d++){var a=g[b][d];
e[b][a]=true
}}}this.environment_=new opensocial.Environment(c.domain,e);
this.useOAuth2=c.useOAuth2;
this.securityToken_=shindig.auth.getSecurityToken();
gadgets.rpc.register("shindig.requestShareApp_callback",JsonRpcContainer.requestShareAppCallback_)
};
var JsonRpcRequestItem=function(b,a){this.rpc=b;
this.processData=a||function(c){return c
};
this.processResponse=function(c,f,e,d){var g=e?JsonRpcContainer.translateHttpError(e.code):null;
return new opensocial.ResponseItem(c,e?null:this.processData(f),g,d)
}
};
(function(){var a={};
JsonRpcContainer.inherits(opensocial.Container);
JsonRpcContainer.prototype.getEnvironment=function(){return this.environment_
};
JsonRpcContainer.prototype.requestShareApp=function(f,h,c,d){var e="cId_"+Math.random();
a[e]=c;
var b=gadgets.util.unescapeString(h.getField(opensocial.Message.Field.BODY));
if(!b||b.length===0){var g=gadgets.util.unescapeString(h.getField(opensocial.Message.Field.BODY_ID));
b=gadgets.Prefs.getMsg(g)
}gadgets.rpc.call("..","shindig.requestShareApp",null,e,f,b)
};
JsonRpcContainer.requestShareAppCallback_=function(f,g,c,e){callback=a[f];
if(callback){a[f]=null;
var d=null;
if(e){d={recipientIds:e}
}var b=new opensocial.ResponseItem(null,d,c);
callback(b)
}};
JsonRpcContainer.prototype.requestCreateActivity=function(e,c,b){b=b||function(){};
var d=opensocial.newDataRequest();
var f=opensocial.newIdSpec({userId:"VIEWER"});
d.add(this.newCreateActivityRequest(f,e),"key");
d.send(function(g){b(g.get("key"))
})
};
JsonRpcContainer.prototype.requestData=function(h,m){m=m||function(){};
var f=h.getRequestObjects();
var k=f.length;
if(k===0){window.setTimeout(function(){m(new opensocial.DataResponse({},true))
},0);
return
}var n=new Array(k);
for(var g=0;
g<k;
g++){var l=f[g];
n[g]=l.request.rpc;
if(l.key){n[g].id=l.key
}}var c=function(y){if(y.errors[0]){JsonRpcContainer.generateErrorResponse(y,f,m);
return
}y=y.result||y.data;
var o=false;
var x={};
for(var s=0;
s<y.length;
s++){y[y[s].id]=y[s]
}for(var p=0;
p<f.length;
p++){var r=f[p];
var q=y[p];
if(r.key&&q.id!==r.key){throw"Request key("+r.key+") and response id("+q.id+") do not match"
}var j=q.result||q.data;
var v=q.error;
var u="";
if(v){u=v.message
}var t=r.request.processResponse(r.request,j,v,u);
o=o||t.hadError();
if(r.key){x[r.key]=t
}}var w=new opensocial.DataResponse(x,o);
m(w)
};
var i={CONTENT_TYPE:"JSON",METHOD:"POST",AUTHORIZATION:"SIGNED",POST_DATA:gadgets.json.stringify(n)};
var d={"Content-Type":"application/json"};
var b=[this.path_];
var e=shindig.auth.getSecurityToken();
if(e){if(this.useOAuth2){d.Authorization="OAuth2 "+e
}else{b.push("?st=",encodeURIComponent(e))
}}this.sendRequest(b.join(""),c,i,d)
};
JsonRpcContainer.prototype.sendRequest=function(b,e,d,c){gadgets.io.makeNonProxiedRequest(b,e,d,c)
};
JsonRpcContainer.generateErrorResponse=function(b,e,g){var c=JsonRpcContainer.translateHttpError(b.rc||b.result.error||b.data.error)||opensocial.ResponseItem.Error.INTERNAL_ERROR;
var f={};
for(var d=0;
d<e.length;
d++){f[e[d].key]=new opensocial.ResponseItem(e[d].request,null,c)
}g(new opensocial.DataResponse(f,true))
};
JsonRpcContainer.translateHttpError=function(b){if(b==501){return opensocial.ResponseItem.Error.NOT_IMPLEMENTED
}else{if(b==401){return opensocial.ResponseItem.Error.UNAUTHORIZED
}else{if(b==403){return opensocial.ResponseItem.Error.FORBIDDEN
}else{if(b==400){return opensocial.ResponseItem.Error.BAD_REQUEST
}else{if(b==500){return opensocial.ResponseItem.Error.INTERNAL_ERROR
}else{if(b==404){return opensocial.ResponseItem.Error.BAD_REQUEST
}else{if(b==417){return opensocial.ResponseItem.Error.LIMIT_EXCEEDED
}}}}}}}};
JsonRpcContainer.prototype.makeIdSpec=function(b){return opensocial.newIdSpec({userId:b})
};
JsonRpcContainer.prototype.translateIdSpec=function(b){var e=b.getField("userId");
var d=b.getField("groupId");
if(!opensocial.Container.isArray(e)){e=[e]
}for(var c=0;
c<e.length;
c++){if(e[c]==="OWNER"){e[c]="@owner"
}else{if(e[c]==="VIEWER"){e[c]="@viewer"
}}}if(d==="FRIENDS"){d="@friends"
}else{if(d=="ALL"){d="@all"
}else{if(d==="SELF"||!d){d="@self"
}}}return{userId:e,groupId:d}
};
JsonRpcContainer.prototype.newFetchPersonRequest=function(e,d){var b=this.newFetchPeopleRequest(this.makeIdSpec(e),d);
var c=this;
return new JsonRpcRequestItem(b.rpc,function(f){return c.createPersonFromJson(f,d)
})
};
JsonRpcContainer.prototype.newFetchPeopleRequest=function(b,d){var e={method:"people.get"};
e.params=this.translateIdSpec(b);
FieldTranslations.addAppDataAsProfileFields(d);
FieldTranslations.translateStandardArguments(d,e.params);
FieldTranslations.translateNetworkDistance(b,e.params);
if(d.profileDetail){FieldTranslations.translateJsPersonFieldsToServerFields(d.profileDetail);
e.params.fields=d.profileDetail
}var c=this;
return new JsonRpcRequestItem(e,function(j){var h;
if(j.list){h=j.list
}else{h=[j]
}var g=[];
for(var f=0;
f<h.length;
f++){g.push(c.createPersonFromJson(h[f],d))
}return new opensocial.Collection(g,j.startIndex,j.totalResults)
})
};
JsonRpcContainer.prototype.createPersonFromJson=function(b,c){FieldTranslations.translateServerPersonToJsPerson(b,c);
return new JsonPerson(b)
};
JsonRpcContainer.prototype.getFieldsList=function(b){if(this.hasNoKeys(b)||this.isWildcardKey(b[0])){return[]
}else{return b
}};
JsonRpcContainer.prototype.hasNoKeys=function(b){return !b||b.length===0
};
JsonRpcContainer.prototype.isWildcardKey=function(b){return b==="*"
};
JsonRpcContainer.prototype.newFetchPersonAppDataRequest=function(b,d,c){var e={method:"appdata.get"};
e.params=this.translateIdSpec(b);
e.params.appId="@app";
e.params.fields=this.getFieldsList(d);
FieldTranslations.translateNetworkDistance(b,e.params);
return new JsonRpcRequestItem(e,function(f){return opensocial.Container.escape(f,c,true)
})
};
JsonRpcContainer.prototype.newUpdatePersonAppDataRequest=function(b,c){var d={method:"appdata.update"};
d.params={userId:["@viewer"],groupId:"@self"};
d.params.appId="@app";
d.params.data={};
d.params.data[b]=c;
d.params.fields=b;
return new JsonRpcRequestItem(d)
};
JsonRpcContainer.prototype.newRemovePersonAppDataRequest=function(b){var c={method:"appdata.delete"};
c.params={userId:["@viewer"],groupId:"@self"};
c.params.appId="@app";
c.params.fields=this.getFieldsList(b);
return new JsonRpcRequestItem(c)
};
JsonRpcContainer.prototype.newFetchActivitiesRequest=function(b,c){var d={method:"activities.get"};
d.params=this.translateIdSpec(b);
d.params.appId="@app";
FieldTranslations.translateStandardArguments(c,d.params);
FieldTranslations.translateNetworkDistance(b,d.params);
return new JsonRpcRequestItem(d,function(f){f=f.list;
var g=[];
for(var e=0;
e<f.length;
e++){g.push(new JsonActivity(f[e]))
}return new opensocial.Collection(g)
})
};
JsonRpcContainer.prototype.newActivity=function(b){return new JsonActivity(b,true)
};
JsonRpcContainer.prototype.newAlbum=function(b){return new JsonAlbum(b)
};
JsonRpcContainer.prototype.newMediaItem=function(d,b,c){c=c||{};
c.mimeType=d;
c.url=b;
return new JsonMediaItem(c)
};
JsonRpcContainer.prototype.newCreateActivityRequest=function(b,c){var d={method:"activities.create"};
d.params=this.translateIdSpec(b);
d.params.appId="@app";
FieldTranslations.translateNetworkDistance(b,d.params);
d.params.activity=c.toJsonObject();
return new JsonRpcRequestItem(d)
};
JsonRpcContainer.prototype.invalidateCache=function(){var g={method:"cache.invalidate"};
var c={invalidationKeys:["@viewer"]};
g.params=c;
var e={CONTENT_TYPE:"JSON",METHOD:"POST",AUTHORIZATION:"SIGNED",POST_DATA:gadgets.json.stringify(g)};
var f={"Content-Type":"application/json"};
var b=[this.invalidatePath_];
var d=shindig.auth.getSecurityToken();
if(d){if(this.useOAuth2){f.Authorization="OAuth2 "+d
}else{b.push("?st=",encodeURIComponent(d))
}}this.sendRequest(b.join(""),null,e,f)
}
})();
JsonRpcContainer.prototype.newMessage=function(a,b){return new JsonMessage(a,b)
};
JsonRpcContainer.prototype.newMessageCollection=function(a){return new JsonMessageCollection(a)
};
JsonRpcContainer.prototype.newFetchMessageCollectionsRequest=function(a,b){var c={method:"messages.get"};
c.params=this.translateIdSpec(a);
return new JsonRpcRequestItem(c,function(e){e=e.list;
var f=[];
for(var d=0;
d<e.length;
d++){f.push(new JsonMessageCollection(e[d]))
}return new opensocial.Collection(f)
})
};
JsonRpcContainer.prototype.newFetchMessagesRequest=function(a,c,b){var d={method:"messages.get"};
d.params=this.translateIdSpec(a);
d.params.msgCollId=c;
return new JsonRpcRequestItem(d,function(g){g=g.list;
var f=[];
for(var e=0;
e<g.length;
e++){f.push(new JsonMessage(g[e]))
}return new opensocial.Collection(f)
})
};
JsonRpcContainer.prototype.newCreateAlbumRequest=function(b,a){var c={method:"albums.create"};
c.params=this.translateIdSpec(b);
c.params.appId="@app";
c.params.album=a.toJsonObject();
return new JsonRpcRequestItem(c)
};
JsonRpcContainer.prototype.newDeleteAlbumRequest=function(a,b){var c={method:"albums.delete"};
c.params=this.translateIdSpec(a);
c.params.appId="@app";
c.params.albumId=b;
return new JsonRpcRequestItem(c)
};
JsonRpcContainer.prototype.newFetchAlbumsRequest=function(a,b){var c={method:"albums.get"};
c.params=this.translateIdSpec(a);
c.params.appId="@app";
return new JsonRpcRequestItem(c,function(f){f=f.list;
var d=[];
for(var e=0;
e<f.length;
e++){d.push(new JsonAlbum(f[e]))
}return new opensocial.Collection(d)
})
};
JsonRpcContainer.prototype.newCreateMediaItemRequest=function(a,c,b){var d={method:"mediaItems.create"};
d.params=this.translateIdSpec(a);
d.params.appId="@app";
d.params.albumId=c;
d.params.mediaItem=b.toJsonObject();
return new JsonRpcRequestItem(d)
};
JsonRpcContainer.prototype.newFetchMediaItemsRequest=function(a,b,c){var d={method:"mediaItems.get"};
d.params=this.translateIdSpec(a);
d.params.appId="@app";
d.params.albumId=b;
return new JsonRpcRequestItem(d,function(g){g=g.list;
var f=[];
for(var e=0;
e<g.length;
e++){f.push(new JsonMediaItem(g[e]))
}return new opensocial.Collection(f)
})
};;

      var requiredConfig = {
        "path": gadgets.config.NonEmptyStringValidator,
        "domain": gadgets.config.NonEmptyStringValidator,
        "supportedFields": gadgets.config.ExistsValidator,
        "invalidatePath": gadgets.config.ExistsValidator
      };

      gadgets.config.register("opensocial", requiredConfig,
        function(config) {
          var configParams = config["opensocial"];
          opensocial.Container.setContainer(new JsonRpcContainer(configParams));
          if (window['caja']) {
            opensocial.Container.get().enableCaja();
          }
      });
    ;
opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest_09=opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest;
opensocial.DataRequest.prototype.newUpdatePersonAppDataRequest=function(c,a,b){if(c!==opensocial.IdSpec.PersonId.VIEWER){throw Error("Cannot update app data for person "+c)
}return this.newUpdatePersonAppDataRequest_09(a,b)
};
opensocial.DataRequest.prototype.newRemovePersonAppDataRequest_09=opensocial.DataRequest.prototype.newRemovePersonAppDataRequest;
opensocial.DataRequest.prototype.newRemovePersonAppDataRequest=function(b,a){if(b!==opensocial.IdSpec.PersonId.VIEWER){throw Error("Cannot remove app data for person "+b)
}return this.newRemovePersonAppDataRequest_09(a)
};;
opensocial.Activity.MediaItem=opensocial.MediaItem;
opensocial.newActivityMediaItem=opensocial.newMediaItem;
opensocial.DataRequest.PersonId=opensocial.IdSpec.PersonId;
opensocial.DataRequest.Group={OWNER_FRIENDS:"OWNER_FRIENDS",VIEWER_FRIENDS:"VIEWER_FRIENDS"};
opensocial.DataRequest.prototype.newFetchPeopleRequest_v08=opensocial.DataRequest.prototype.newFetchPeopleRequest;
opensocial.DataRequest.prototype.newFetchPeopleRequest=function(a,b){return this.newFetchPeopleRequest_v08(translateIdSpec(a),b)
};
opensocial.DataRequest.prototype.newFetchPersonAppDataRequest_v08=opensocial.DataRequest.prototype.newFetchPersonAppDataRequest;
opensocial.DataRequest.prototype.newFetchPersonAppDataRequest=function(a,c,b){return this.newFetchPersonAppDataRequest_v08(translateIdSpec(a),c,b)
};
opensocial.DataRequest.prototype.newFetchActivitiesRequest_v08=opensocial.DataRequest.prototype.newFetchActivitiesRequest;
opensocial.DataRequest.prototype.newFetchActivitiesRequest=function(a,c){var b=this.newFetchActivitiesRequest_v08(translateIdSpec(a),c);
b.isActivityRequest=true;
return b
};
opensocial.ResponseItem.prototype.getData_v08=opensocial.ResponseItem.prototype.getData;
opensocial.ResponseItem.prototype.getData=function(){var a=this.getData_v08();
if(this.getOriginalDataRequest()&&this.getOriginalDataRequest().isActivityRequest){return{activities:a}
}return a
};
opensocial.Environment.ObjectType.ACTIVITY_MEDIA_ITEM=opensocial.Environment.ObjectType.MEDIA_ITEM;
opensocial.Person.prototype.getField_v08=opensocial.Person.prototype.getField;
opensocial.Person.prototype.getField=function(b,d){var e=this.getField_v08(b,d);
if(b==="lookingFor"&&e){var c=new Array(e.length);
for(var a=0;
a<e.length;
a++){c[a]=e[a].getDisplayValue()
}return c.join()
}else{return e
}};
function translateIdSpec(a){if(a=="OWNER_FRIENDS"){return opensocial.newIdSpec({userId:"OWNER",groupId:"FRIENDS"})
}else{if(a=="VIEWER_FRIENDS"){return opensocial.newIdSpec({userId:"VIEWER",groupId:"FRIENDS"})
}else{return opensocial.newIdSpec({userId:a})
}}};;
var JSON=window.JSON||gadgets.json;
var _IG_Prefs=(function(){var a=null;
var b=function(){if(!a){a=new gadgets.Prefs();
a.setDontEscape_()
}return a
};
b._parseURL=gadgets.Prefs.parseUrl;
return b
})();
function _IG_Fetch_wrapper(b,a){b(a.data?a.data:"")
}function _IG_FetchContent(b,g,c){var f=c||{};
if(f.refreshInterval){f.REFRESH_INTERVAL=f.refreshInterval
}else{f.REFRESH_INTERVAL=3600
}for(var e in f){var d=f[e];
delete f[e];
f[e.toUpperCase()]=d
}var a=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,g);
gadgets.io.makeRequest(b,a,f)
}function _IG_FetchXmlContent(b,e,c){var d=c||{};
if(d.refreshInterval){d.REFRESH_INTERVAL=d.refreshInterval
}else{d.REFRESH_INTERVAL=3600
}d.CONTENT_TYPE="DOM";
var a=gadgets.util.makeClosure(null,_IG_Fetch_wrapper,e);
gadgets.io.makeRequest(b,a,d)
}function _IG_FetchFeedAsJSON(b,f,c,a,d){var e=d||{};
e.CONTENT_TYPE="FEED";
e.NUM_ENTRIES=c;
e.GET_SUMMARIES=a;
gadgets.io.makeRequest(b,function(j){j.data=j.data||{};
if(j.errors&&j.errors.length>0){j.data.ErrorMsg=j.errors[0]
}if(j.data.link){j.data.URL=b
}if(j.data.title){j.data.Title=j.data.title
}if(j.data.description){j.data.Description=j.data.description
}if(j.data.link){j.data.Link=j.data.link
}if(j.data.items&&j.data.items.length>0){j.data.Entry=j.data.items;
for(var h=0;
h<j.data.Entry.length;
++h){var i=j.data.Entry[h];
i.Title=i.title;
i.Link=i.link;
i.Summary=i.summary||i.description;
i.Date=i.pubDate
}}for(var g=0;
g<j.data.Entry.length;
++g){var i=j.data.Entry[g];
i.Date=(i.Date/1000)
}f(j.data)
},e)
}function _IG_GetCachedUrl(a,b){var c=b||{};
c.REFRESH_INTERVAL=3600;
if(c.refreshInterval){c.REFRESH_INTERVAL=c.refreshInterval
}return gadgets.io.getProxyUrl(a,c)
}function _IG_GetImageUrl(a,b){return _IG_GetCachedUrl(a,b)
}function _IG_GetImage(b){var a=document.createElement("img");
a.src=_IG_GetCachedUrl(b);
return a
}function _IG_RegisterOnloadHandler(a){gadgets.util.registerOnLoadHandler(a)
}function _IG_Callback(b,c){var a=arguments;
return function(){var d=Array.prototype.slice.call(arguments);
b.apply(null,d.concat(Array.prototype.slice.call(a,1)))
}
}var _args=gadgets.util.getUrlParameters;
function _gel(a){return document.getElementById?document.getElementById(a):null
}function _gelstn(a){if(a==="*"&&document.all){return document.all
}return document.getElementsByTagName?document.getElementsByTagName(a):[]
}function _gelsbyregex(d,f){var c=_gelstn(d);
var e=[];
for(var b=0,a=c.length;
b<a;
++b){if(f.test(c[b].id)){e.push(c[b])
}}return e
}function _esc(a){return window.encodeURIComponent?encodeURIComponent(a):escape(a)
}function _unesc(a){return window.decodeURIComponent?decodeURIComponent(a):unescape(a)
}function _hesc(a){return gadgets.util.escapeString(a)
}function _striptags(a){return a.replace(/<\/?[^>]+>/g,"")
}function _trim(a){return a.replace(/^\s+|\s+$/g,"")
}function _toggle(a){a=(typeof a==="string")?_gel(a):a;
if(a!==null){if(a.style.display.length===0||a.style.display==="block"){a.style.display="none"
}else{if(a.style.display==="none"){a.style.display="block"
}}}}var _uid=(function(){var a=0;
return function(){return a++
}
})();
function _min(d,c){return(d<c?d:c)
}function _max(d,c){return(d>c?d:c)
}function _exportSymbols(a,c){var m=window;
var f=a.split(".");
for(var h=0,g=f.length;
h<g;
h++){var b=f[h];
m[b]=m[b]||{};
m=m[b]
}for(var e=0,d=c.length;
e<d;
e+=2){m[c[e]]=c[e+1]
}}function _IG_AddDOMEventHandler(c,b,a){gadgets.warn("_IG_AddDOMEventHandler not implemented - see SHINDIG-198")
};;
(function(){function e(b,c,a){b={msg:b||"",line:a||0,jsUrl:0==window.location.href.indexOf(c)?"-top-":c,fullUrl:window.location};try{if(++window._varz_numerrors,gadgets&&!(3<f)){c={};c[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.GET;var a=encodeURIComponent||escape,d=gadgets.util.getUrlParameters(),e=d.container||d.synd,g=d.gadget||d.url,i=["/gadgets/evthdlr?t=err&gadget=",a(g),"&container=",a(e),"&jsurl=",a(b.jsUrl),"&line=",a(b.line),"&session=",h,"&count=",f,"&msg=",a(b.msg)];gadgets.io.makeNonProxiedRequest(i.join(""),
null,c);f++}}catch(j){}}window._varz_numerrors=0;var h=(new Date).getTime(),f=0;-1==window.location.href.indexOf("&debug=1")&&-1==window.location.href.indexOf("?debug=1")&&(window.onerror=e)})();
;
{var html4={},html,html_sanitize;html4.atype={'NONE':0,'URI':1,'URI_FRAGMENT':11,'SCRIPT':2,'STYLE':3,'ID':4,'IDREF':5,'IDREFS':6,'GLOBAL_NAME':7,'LOCAL_NAME':8,'CLASSES':9,'FRAME_TARGET':10},html4.ATTRIBS={'*::class':9,'*::dir':0,'*::id':4,'*::lang':0,'*::onclick':2,'*::ondblclick':2,'*::onkeydown':2,'*::onkeypress':2,'*::onkeyup':2,'*::onload':2,'*::onmousedown':2,'*::onmousemove':2,'*::onmouseout':2,'*::onmouseover':2,'*::onmouseup':2,'*::style':3,'*::title':0,'a::accesskey':0,'a::coords':0,'a::href':1,'a::hreflang':0,'a::name':7,'a::onblur':2,'a::onfocus':2,'a::rel':0,'a::rev':0,'a::shape':0,'a::tabindex':0,'a::target':10,'a::type':0,'area::accesskey':0,'area::alt':0,'area::coords':0,'area::href':1,'area::nohref':0,'area::onblur':2,'area::onfocus':2,'area::shape':0,'area::tabindex':0,'area::target':10,'bdo::dir':0,'blockquote::cite':1,'br::clear':0,'button::accesskey':0,'button::disabled':0,'button::name':8,'button::onblur':2,'button::onfocus':2,'button::tabindex':0,'button::type':0,'button::value':0,'canvas::height':0,'canvas::width':0,'caption::align':0,'col::align':0,'col::char':0,'col::charoff':0,'col::span':0,'col::valign':0,'col::width':0,'colgroup::align':0,'colgroup::char':0,'colgroup::charoff':0,'colgroup::span':0,'colgroup::valign':0,'colgroup::width':0,'del::cite':1,'del::datetime':0,'dir::compact':0,'div::align':0,'dl::compact':0,'font::color':0,'font::face':0,'font::size':0,'form::accept':0,'form::action':1,'form::autocomplete':0,'form::enctype':0,'form::method':0,'form::name':7,'form::onreset':2,'form::onsubmit':2,'form::target':10,'h1::align':0,'h2::align':0,'h3::align':0,'h4::align':0,'h5::align':0,'h6::align':0,'hr::align':0,'hr::noshade':0,'hr::size':0,'hr::width':0,'iframe::align':0,'iframe::frameborder':0,'iframe::height':0,'iframe::marginheight':0,'iframe::marginwidth':0,'iframe::width':0,'img::align':0,'img::alt':0,'img::border':0,'img::height':0,'img::hspace':0,'img::ismap':0,'img::name':7,'img::src':1,'img::usemap':11,'img::vspace':0,'img::width':0,'input::accept':0,'input::accesskey':0,'input::align':0,'input::alt':0,'input::autocomplete':0,'input::checked':0,'input::disabled':0,'input::ismap':0,'input::maxlength':0,'input::name':8,'input::onblur':2,'input::onchange':2,'input::onfocus':2,'input::onselect':2,'input::readonly':0,'input::size':0,'input::src':1,'input::tabindex':0,'input::type':0,'input::usemap':11,'input::value':0,'ins::cite':1,'ins::datetime':0,'label::accesskey':0,'label::for':5,'label::onblur':2,'label::onfocus':2,'legend::accesskey':0,'legend::align':0,'li::type':0,'li::value':0,'map::name':7,'menu::compact':0,'ol::compact':0,'ol::start':0,'ol::type':0,'optgroup::disabled':0,'optgroup::label':0,'option::disabled':0,'option::label':0,'option::selected':0,'option::value':0,'p::align':0,'pre::width':0,'q::cite':1,'select::disabled':0,'select::multiple':0,'select::name':8,'select::onblur':2,'select::onchange':2,'select::onfocus':2,'select::size':0,'select::tabindex':0,'table::align':0,'table::bgcolor':0,'table::border':0,'table::cellpadding':0,'table::cellspacing':0,'table::frame':0,'table::rules':0,'table::summary':0,'table::width':0,'tbody::align':0,'tbody::char':0,'tbody::charoff':0,'tbody::valign':0,'td::abbr':0,'td::align':0,'td::axis':0,'td::bgcolor':0,'td::char':0,'td::charoff':0,'td::colspan':0,'td::headers':6,'td::height':0,'td::nowrap':0,'td::rowspan':0,'td::scope':0,'td::valign':0,'td::width':0,'textarea::accesskey':0,'textarea::cols':0,'textarea::disabled':0,'textarea::name':8,'textarea::onblur':2,'textarea::onchange':2,'textarea::onfocus':2,'textarea::onselect':2,'textarea::readonly':0,'textarea::rows':0,'textarea::tabindex':0,'tfoot::align':0,'tfoot::char':0,'tfoot::charoff':0,'tfoot::valign':0,'th::abbr':0,'th::align':0,'th::axis':0,'th::bgcolor':0,'th::char':0,'th::charoff':0,'th::colspan':0,'th::headers':6,'th::height':0,'th::nowrap':0,'th::rowspan':0,'th::scope':0,'th::valign':0,'th::width':0,'thead::align':0,'thead::char':0,'thead::charoff':0,'thead::valign':0,'tr::align':0,'tr::bgcolor':0,'tr::char':0,'tr::charoff':0,'tr::valign':0,'ul::compact':0,'ul::type':0},html4.eflags={'OPTIONAL_ENDTAG':1,'EMPTY':2,'CDATA':4,'RCDATA':8,'UNSAFE':16,'FOLDABLE':32,'SCRIPT':64,'STYLE':128},html4.ELEMENTS={'a':0,'abbr':0,'acronym':0,'address':0,'applet':16,'area':2,'b':0,'base':18,'basefont':18,'bdo':0,'big':0,'blockquote':0,'body':49,'br':2,'button':0,'canvas':0,'caption':0,'center':0,'cite':0,'code':0,'col':2,'colgroup':1,'dd':1,'del':0,'dfn':0,'dir':0,'div':0,'dl':0,'dt':1,'em':0,'fieldset':0,'font':0,'form':0,'frame':18,'frameset':16,'h1':0,'h2':0,'h3':0,'h4':0,'h5':0,'h6':0,'head':49,'hr':2,'html':49,'i':0,'iframe':4,'img':2,'input':2,'ins':0,'isindex':18,'kbd':0,'label':0,'legend':0,'li':1,'link':18,'map':0,'menu':0,'meta':18,'nobr':0,'noembed':4,'noframes':20,'noscript':20,'object':16,'ol':0,'optgroup':0,'option':1,'p':1,'param':18,'pre':0,'q':0,'s':0,'samp':0,'script':84,'select':0,'small':0,'span':0,'strike':0,'strong':0,'style':148,'sub':0,'sup':0,'table':0,'tbody':1,'td':1,'textarea':8,'tfoot':1,'th':1,'thead':1,'title':24,'tr':1,'tt':0,'u':0,'ul':0,'var':0},html4.ueffects={'NOT_LOADED':0,'SAME_DOCUMENT':1,'NEW_DOCUMENT':2},html4.URIEFFECTS={'a::href':2,'area::href':2,'blockquote::cite':0,'body::background':1,'del::cite':0,'form::action':2,'img::src':1,'input::src':1,'ins::cite':0,'q::cite':0},html4.ltypes={'UNSANDBOXED':2,'SANDBOXED':1,'DATA':0},html4.LOADERTYPES={'a::href':2,'area::href':2,'blockquote::cite':2,'body::background':1,'del::cite':2,'form::action':2,'img::src':1,'input::src':1,'ins::cite':2,'q::cite':2},html=(function(html4){var
ENTITIES,INSIDE_TAG_TOKEN,OUTSIDE_TAG_TOKEN,URI_SCHEME_RE,WHITELISTED_SCHEMES,ampRe,decimalEscapeRe,entityRe,gtRe,hexEscapeRe,lcase,looseAmpRe,ltRe,nulRe,quotRe;'script'==='SCRIPT'.toLowerCase()?(lcase=function(s){return s.toLowerCase()}):(lcase=function(s){return s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(ch.charCodeAt(0)|32)})}),ENTITIES={'lt':'<','gt':'>','amp':'&','nbsp':'\xa0','quot':'\"','apos':'\''},WHITELISTED_SCHEMES=/^(?:https?|mailto)$/i,decimalEscapeRe=/^#(\d+)$/,hexEscapeRe=/^#x([0-9A-Fa-f]+)$/;function
lookupEntity(name){var m;return name=lcase(name),ENTITIES.hasOwnProperty(name)?ENTITIES[name]:(m=name.match(decimalEscapeRe),m?String.fromCharCode(parseInt(m[1],10)):(m=name.match(hexEscapeRe))?String.fromCharCode(parseInt(m[1],16)):'')}function
decodeOneEntity(_,name){return lookupEntity(name)}nulRe=/\0/g;function stripNULs(s){return s.replace(nulRe,'')}entityRe=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g;function
unescapeEntities(s){return s.replace(entityRe,decodeOneEntity)}ampRe=/&/g,looseAmpRe=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,ltRe=/</g,gtRe=/>/g,quotRe=/\"/g;function
escapeAttrib(s){return(''+s).replace(ampRe,'&amp;').replace(ltRe,'&lt;').replace(gtRe,'&gt;').replace(quotRe,'&#34;')}function
normalizeRCData(rcdata){return rcdata.replace(looseAmpRe,'&amp;$1').replace(ltRe,'&lt;').replace(gtRe,'&gt;')}INSIDE_TAG_TOKEN=new
RegExp('^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|\'[^\']*\'|(?=[a-z][a-z-]*\\s*=)|[^>\"\'\\s]*))?)|(/?>)|[\\s\\S][^a-z\\s>]*)','i'),OUTSIDE_TAG_TOKEN=new
RegExp('^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))','i');function
makeSaxParser(handler){return function parse(htmlText,param){var attribName,attribs,dataEnd,decodedValue,eflags,encodedValue,htmlLower,inTag,m,openTag,tagName;htmlText=String(htmlText),htmlLower=null,inTag=false,attribs=[],tagName=void
0,eflags=void 0,openTag=void 0,handler.startDoc&&handler.startDoc(param);while(htmlText){m=htmlText.match(inTag?INSIDE_TAG_TOKEN:OUTSIDE_TAG_TOKEN),htmlText=htmlText.substring(m[0].length);if(inTag){if(m[1]){attribName=lcase(m[1]);if(m[2]){encodedValue=m[3];switch(encodedValue.charCodeAt(0)){case
34:case 39:encodedValue=encodedValue.substring(1,encodedValue.length-1)}decodedValue=unescapeEntities(stripNULs(encodedValue))}else
decodedValue=attribName;attribs.push(attribName,decodedValue)}else if(m[4])eflags!==void
0&&(openTag?handler.startTag&&handler.startTag(tagName,attribs,param):handler.endTag&&handler.endTag(tagName,param)),openTag&&eflags&(html4.eflags.CDATA|html4.eflags.RCDATA)&&(htmlLower===null?(htmlLower=lcase(htmlText)):(htmlLower=htmlLower.substring(htmlLower.length-htmlText.length)),dataEnd=htmlLower.indexOf('</'+tagName),dataEnd<0&&(dataEnd=htmlText.length),dataEnd&&(eflags&html4.eflags.CDATA?handler.cdata&&handler.cdata(htmlText.substring(0,dataEnd),param):handler.rcdata&&handler.rcdata(normalizeRCData(htmlText.substring(0,dataEnd)),param),htmlText=htmlText.substring(dataEnd))),tagName=eflags=openTag=void
0,attribs.length=0,inTag=false}else if(m[1])handler.pcdata&&handler.pcdata(m[0],param);else
if(m[3])openTag=!m[2],inTag=true,tagName=lcase(m[3]),eflags=html4.ELEMENTS.hasOwnProperty(tagName)?html4.ELEMENTS[tagName]:void
0;else if(m[4])handler.pcdata&&handler.pcdata(m[4],param);else if(m[5]){if(handler.pcdata)switch(m[5]){case'<':handler.pcdata('&lt;',param);break;case'>':handler.pcdata('&gt;',param);break;case'&':handler.pcdata('&amp;',param)}}}handler.endDoc&&handler.endDoc(param)}}function
makeHtmlSanitizer(tagPolicy){var ignoring,stack;return makeSaxParser({'startDoc':function(_){stack=[],ignoring=false},'startTag':function(tagName,attribs,out){var
attribName,eflags,i,n,value;if(ignoring)return;if(!html4.ELEMENTS.hasOwnProperty(tagName))return;eflags=html4.ELEMENTS[tagName];if(eflags&html4.eflags.FOLDABLE)return;attribs=tagPolicy(tagName,attribs);if(!attribs)return ignoring=!(eflags&html4.eflags.EMPTY),void
0;eflags&html4.eflags.EMPTY||stack.push(tagName),out.push('<',tagName);for(i=0,n=attribs.length;i<n;i+=2)attribName=attribs[i],value=attribs[i+1],value!==null&&value!==void
0&&out.push(' ',attribName,'=\"',escapeAttrib(value),'\"');out.push('>')},'endTag':function(tagName,out){var
eflags,i,index,stackEl;if(ignoring)return ignoring=false,void 0;if(!html4.ELEMENTS.hasOwnProperty(tagName))return;eflags=html4.ELEMENTS[tagName];if(!(eflags&(html4.eflags.EMPTY|html4.eflags.FOLDABLE))){if(eflags&html4.eflags.OPTIONAL_ENDTAG)for(index=stack.length;--index>=0;){stackEl=stack[index];if(stackEl===tagName)break;if(!(html4.ELEMENTS[stackEl]&html4.eflags.OPTIONAL_ENDTAG))return}else
for(index=stack.length;--index>=0;)if(stack[index]===tagName)break;if(index<0)return;for(i=stack.length;--i>index;)stackEl=stack[i],html4.ELEMENTS[stackEl]&html4.eflags.OPTIONAL_ENDTAG||out.push('</',stackEl,'>');stack.length=index,out.push('</',tagName,'>')}},'pcdata':function(text,out){ignoring||out.push(text)},'rcdata':function(text,out){ignoring||out.push(text)},'cdata':function(text,out){ignoring||out.push(text)},'endDoc':function(out){var
i;for(i=stack.length;--i>=0;)out.push('</',stack[i],'>');stack.length=0}})}URI_SCHEME_RE=new
RegExp('^(?:([^:/?#]+):)?');function sanitizeAttribs(tagName,attribs,opt_uriPolicy,opt_nmTokenPolicy){var
attribKey,attribName,atype,i,parsedUri,value;for(i=0;i<attribs.length;i+=2){attribName=attribs[i],value=attribs[i+1],atype=null,((attribKey=tagName+'::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey)))&&(atype=html4.ATTRIBS[attribKey]);if(atype!==null)switch(atype){case
html4.atype.NONE:break;case html4.atype.SCRIPT:case html4.atype.STYLE:value=null;break;case
html4.atype.ID:case html4.atype.IDREF:case html4.atype.IDREFS:case html4.atype.GLOBAL_NAME:case
html4.atype.LOCAL_NAME:case html4.atype.CLASSES:value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value;break;case
html4.atype.URI:parsedUri=(''+value).match(URI_SCHEME_RE),parsedUri?!parsedUri[1]||WHITELISTED_SCHEMES.test(parsedUri[1])?(value=opt_uriPolicy?opt_uriPolicy(value):null):(value=null):(value=null);break;case
html4.atype.URI_FRAGMENT:value&&'#'===value.charAt(0)?(value=value.substring(1),value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value,value!==null&&value!==void
0&&(value='#'+value)):(value=null);break;default:value=null}else value=null;attribs[i+1]=value}return attribs}function
makeTagPolicy(opt_uriPolicy,opt_nmTokenPolicy){return function(tagName,attribs){if(!(html4.ELEMENTS[tagName]&html4.eflags.UNSAFE))return sanitizeAttribs(tagName,attribs,opt_uriPolicy,opt_nmTokenPolicy)}}function
sanitizeWithPolicy(inputHtml,tagPolicy){var outputArray=[];return makeHtmlSanitizer(tagPolicy)(inputHtml,outputArray),outputArray.join('')}function
sanitize(inputHtml,opt_uriPolicy,opt_nmTokenPolicy){var tagPolicy=makeTagPolicy(opt_uriPolicy,opt_nmTokenPolicy);return sanitizeWithPolicy(inputHtml,tagPolicy)}return{'escapeAttrib':escapeAttrib,'makeHtmlSanitizer':makeHtmlSanitizer,'makeSaxParser':makeSaxParser,'makeTagPolicy':makeTagPolicy,'normalizeRCData':normalizeRCData,'sanitize':sanitize,'sanitizeAttribs':sanitizeAttribs,'sanitizeWithPolicy':sanitizeWithPolicy,'unescapeEntities':unescapeEntities}})(html4),html_sanitize=html.sanitize,typeof
window!=='undefined'&&(window.html=html,window.html_sanitize=html_sanitize)};
gadgets.views=function(){var b={};
var f=null;
var c={};
var e={};
function a(i){if(!i){i=window.event
}var h;
if(i.target){h=i.target
}else{if(i.srcElement){h=i.srcElement
}}if(h.nodeType===3){h=h.parentNode
}if(h.nodeName.toLowerCase()==="a"){var g=h.getAttribute("href");
if(g&&g[0]!=="#"&&g.indexOf("://")===-1){gadgets.views.requestNavigateTo(f,g);
if(i.stopPropagation){i.stopPropagation()
}if(i.preventDefault){i.preventDefault()
}i.returnValue=false;
i.cancelBubble=true;
return false
}}return false
}function d(j){var o=j.views||{};
for(var p in o){if(o.hasOwnProperty(p)){if(p!="rewriteLinks"){var l=o[p];
var k=p.toUpperCase();
b[k]=k;
if(!l){continue
}c[p]=new gadgets.views.View(p,l.isOnlyVisible);
var h=l.aliases||[];
for(var m=0,n;
(n=h[m]);
++m){c[n]=new gadgets.views.View(p,l.isOnlyVisible)
}}}}var g=gadgets.util.getUrlParameters();
if(g["view-params"]){e=gadgets.json.parse(g["view-params"])||e
}f=c[g.view]||c["default"];
if(o.rewriteLinks){gadgets.util.attachBrowserEvent(document,"click",a,false)
}}gadgets.config.register("views",null,d);
return{bind:function(x,v){if(typeof x!=="string"){throw new Error("Invalid urlTemplate")
}if(typeof v!=="object"){throw new Error("Invalid environment")
}var s=/^([a-zA-Z0-9][a-zA-Z0-9_\.\-]*)(=([a-zA-Z0-9\-\._~]|(%[0-9a-fA-F]{2}))*)?$/,z=new RegExp("\\{([^}]*)\\}","g"),w=/^-([a-zA-Z]+)\|([^|]*)\|(.+)$/,n=[],r=0,l,k,i,q,m,h,o,t;
function j(B,A){return v.hasOwnProperty(B)?v[B]:A
}function g(A){if(!(k=A.match(s))){throw new Error("Invalid variable : "+A)
}}function y(E,A,D){var B,C=E.split(",");
for(B=0;
B<C.length;
++B){g(C[B]);
if(D(A,j(k[1]),k[1])){break
}}return A
}function u(A){if((typeof A==="object")||(typeof A==="function")){for(var B in A){if(A.hasOwnProperty(B)){return false
}}return true
}return false
}while((l=z.exec(x))){n.push(x.substring(r,l.index));
r=z.lastIndex;
if((k=l[1].match(s))){i=k[1];
q=k[2]?k[2].substr(1):"";
n.push(j(i,q))
}else{if((k=l[1].match(w))){m=k[1];
h=k[2];
o=k[3];
t=0;
switch(m){case"neg":t=1;
case"opt":if(y(o,{flag:t},function(B,A){if(typeof A!=="undefined"&&!u(A)){B.flag=!B.flag;
return 1
}return 0
}).flag){n.push(h)
}break;
case"join":n.push(y(o,[],function(C,B,A){if(typeof B==="string"){C.push(A+"="+B)
}else{if(typeof B==="object"){for(var D in B){if(B.hasOwnProperty(D)){C.push(D+"="+B[D])
}}}}}).join(h));
break;
case"list":g(o);
var p=j(k[1]);
if(typeof p==="object"&&typeof p.join==="function"){n.push(p.join(h))
}break;
case"prefix":t=1;
case"suffix":g(o);
p=j(k[1],k[2]&&k[2].substr(1));
if(typeof p==="string"){n.push(t?h+p:p+h)
}else{if(typeof p==="object"&&typeof p.join==="function"){n.push(t?h+p.join(h):p.join(h)+h)
}}break;
default:throw new Error("Invalid operator : "+m)
}}else{throw new Error("Invalid syntax : "+l[0])
}}}n.push(x.substr(r));
return n.join("")
},requestNavigateTo:function(g,i,h){if(typeof g!=="string"){g=g.getName()
}gadgets.rpc.call(null,"requestNavigateTo",null,g,i,h)
},getCurrentView:function(){return f
},getSupportedViews:function(){return c
},getParams:function(){return e
},ViewType:b}
}();
gadgets.views.View=function(a,b){this.name_=a;
this.isOnlyVisible_=!!b
};
gadgets.views.View.prototype.getName=function(){return this.name_
};
gadgets.views.View.prototype.getUrlTemplate=function(){return gadgets.config&&gadgets.config.views&&gadgets.config.views[this.name_]&&gadgets.config.views[this.name_].urlTemplate
};
gadgets.views.View.prototype.bind=function(a){return gadgets.views.bind(this.getUrlTemplate(),a)
};
gadgets.views.View.prototype.isOnlyVisibleGadget=function(){return this.isOnlyVisible_
};;
tamings___.push(function(a){caja___.whitelistCtors([[gadgets.views,"View",Object]]);
caja___.whitelistMeths([[gadgets.views.View,"bind"],[gadgets.views.View,"getUrlTemplate"],[gadgets.views.View,"isOnlyVisibleGadget"],[gadgets.views.View,"getName"]]);
caja___.whitelistFuncs([[gadgets.views,"getCurrentView"],[gadgets.views,"getParams"],[gadgets.views,"requestNavigateTo"]])
});;
gadgets.skins=function(){var b=null,e={BG_COLOR:["CONTENT_BG_COLOR"],FONT_COLOR:["CONTENT_TEXT_COLOR"],ANCHOR_COLOR:["CONTENT_LINK_COLOR"],CONTENT_HEADLINE_COLOR:["CONTENT_TEXT_COLOR"],CONTENT_SECONDARY_TEXT_COLOR:["CONTENT_TEXT_COLOR"],CONTENT_SECONDARY_LINK_COLOR:["CONTENT_LINK_COLOR"],ENDCAP_BG_COLOR:["CONTENT_BG_COLOR"],ENDCAP_LINK_COLOR:["CONTENT_LINK_COLOR"],ENDCAP_TEXT_COLOR:["CONTENT_TEXT_COLOR"],ALTERNATE_BG_COLOR:["CONTENT_BG_COLOR"],CONTENT_VISITED_LINK_COLOR:["CONTENT_LINK_COLOR"]};return{init:function(){b=
null},getProperty:function(d){if(!b){var c=gadgets.views.getParams();b=c.skin||{}}var a=b[d];if(!a&&e[d])for(c=0;c<e[d].length&&!(a=e[d][c],a=b[a]);c++);a&&(a=gadgets.util.escapeString(a));return a}}}();gadgets.skins.Property=gadgets.util.makeEnum("BG_IMAGE,BG_COLOR,FONT_COLOR,BG_POSITION,BG_REPEAT,ANCHOR_COLOR,FONT_FACE,BORDER_COLOR,CONTENT_BG_COLOR,CONTENT_HEADLINE_COLOR,CONTENT_LINK_COLOR,CONTENT_SECONDARY_TEXT_COLOR,CONTENT_SECONDARY_LINK_COLOR,CONTENT_TEXT_COLOR,ENDCAP_BG_COLOR,ENDCAP_LINK_COLOR,ENDCAP_TEXT_COLOR,CONTENT_VISITED_LINK_COLOR,ALTERNATE_BG_COLOR".split(","));
;
gadgets.window=gadgets.window||{};
(function(){gadgets.window.getViewportDimensions=function(){var a=0;
var b=0;
if(self.innerHeight){a=self.innerWidth;
b=self.innerHeight
}else{if(document.documentElement&&document.documentElement.clientHeight){a=document.documentElement.clientWidth;
b=document.documentElement.clientHeight
}else{if(document.body){a=document.body.clientWidth;
b=document.body.clientHeight
}}}return{width:a,height:b}
}
})();;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.window,"getViewportDimensions"]])
});;
gadgets.window=gadgets.window||{};
(function(){function a(e,c){var d=window.getComputedStyle(e,"");
var f=d.getPropertyValue(c);
f.match(/^([0-9]+)/);
return parseInt(RegExp.$1,10)
}function b(){var m=0;
var k=[document.body];
while(k.length>0){var f=k.shift();
var e=f.childNodes;
if(typeof f.style!=="undefined"){var g=f.style.overflowY;
if(!g){var j=document.defaultView.getComputedStyle(f,null);
g=j?j.overflowY:null
}if(g!="visible"&&g!="inherit"){var l=f.style.height;
if(!l){var j=document.defaultView.getComputedStyle(f,null);
l=j?j.height:""
}if(l.length>0&&l!="auto"){continue
}}}for(var h=0;
h<e.length;
h++){var d=e[h];
if(typeof d.offsetTop!=="undefined"&&typeof d.offsetHeight!=="undefined"){var c=d.offsetTop+d.offsetHeight+a(d,"margin-bottom");
m=Math.max(m,c)
}k.push(d)
}}return m+a(document.body,"border-bottom")+a(document.body,"margin-bottom")+a(document.body,"padding-bottom")
}gadgets.window.getHeight=function(){var g=gadgets.window.getViewportDimensions().height;
var c=document.body;
var f=document.documentElement;
if(document.compatMode==="CSS1Compat"&&f.scrollHeight){return f.scrollHeight!==g?f.scrollHeight:f.offsetHeight
}else{if(navigator.userAgent.indexOf("AppleWebKit")>=0){return b()
}else{if(c&&f){var d=f.scrollHeight;
var e=f.offsetHeight;
if(f.clientHeight!==e){d=c.scrollHeight;
e=c.offsetHeight
}if(d>g){return d>e?d:e
}else{return d<e?d:e
}}}}}
}());;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.window,"getHeight"]])
});;
gadgets.window=gadgets.window||{};
(function(){var a;
gadgets.window.adjustHeight=function(d){var c=parseInt(d,10);
var b=false;
if(isNaN(c)){b=true;
c=gadgets.window.getHeight()
}if(c!==a&&!isNaN(c)&&!(b&&c===0)){a=c;
gadgets.rpc.call(null,"resize_iframe",null,c)
}}
}());
var _IG_AdjustIFrameHeight=gadgets.window.adjustHeight;;
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.window,"adjustHeight"]])
});;
gadgets.config.init({"opensocial":{"invalidatePath":"//%host%/gadgets/api/rpc","domain":"google.com","path":"http://%host%/ps/api/rpc","supportedFields":{"person":["id","name","thumbnailUrl","nickname","profileUrl"],"mediaItem":["album_id","created","description","duration","file_size","id","language","last_updated","location","mime_type","num_comments","num_views","num_votes","rating","start_time","tagged_people","tags","thumbnail_url","title","type","url"],"sortOrder":["name"],"name":["unstructured","familyName","givenName","additionalName","honorificPrefix","honorificSuffix"],"album":["id","thumbnailUrl","title","description","location","ownerId"],"filterType":["all","hasApp"],"activity":["id","externalId","userId","appId","streamTitle","streamUrl","streamSourceUrl","streamFaviconUrl","title","body","url","mediaItems","postedTime","userThumbnailUrl","userProfileUrl","userName"],"activityMediaItem":["type","mimeType","url"]}},"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"},"shindig.auth":{"authToken":"","trustedJson":""},"views":{"canvas":{"isOnlyVisible":true,"urlTemplate":"http://localhost/gadgets/canvas?{var}","aliases":["FULL_PAGE"]},"embed":{"isOnlyVisible":false,"urlTemplate":"http://localhost/gadgets/embed?{var}","aliases":["profile","DASHBOARD","default"]},"profile":{"isOnlyVisible":false,"urlTemplate":"http://localhost/gadgets/profile?{var}","aliases":["DASHBOARD","default"]}},"core.util":{"opensocial-0.7":{},"google.blog":{},"core":{},"skins":{},"dynamic-height":{},"views":{}},"skins":{"properties":{"BG_POSITION":"","FONT_COLOR":"","BG_IMAGE":"","ANCHOR_COLOR":"","BG_REPEAT":"","BG_COLOR":""}},"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www-fc-opensocial.googleusercontent.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"}});
</script><script>gadgets.Prefs.setMessages_({});gadgets.Prefs.setDefaultPrefs_({"summaryLength":"200","numberOfPosts":"10"});gadgets.io.preloaded_=[];</script>
   
   </head><body dir="ltr" style="background-color: transparent; "><script type="text/javascript">

     
     /**
      * This method is called after your friend data is loaded. It parses the friend data and
      * saves the profile ids of your friends, then fetches the blog data.
      */
     function onLoadFriends(data) {

       // Get the feed data
       blog = new google.Blog(function() {

         window.setTimeout(function() {
           blog.getCommentsJson(onLoadFeed);
         }, 100);
       }, window.name);
     }

     /**
      * This method parses the feed data that was returned by the call to fetch the blog data.
      */
     function onLoadFeed(data) {
       var list = document.getElementById("output");
     
       if (!data.data) {
         list.innerHTML = "An error occured fetching the feed data";
       }
     
       data = data.data;

       if (!data.feed.entry || data.feed.entry.length == 0) {
         list.innerHTML = "No posts on this blog!";
       }
	   var viewParams = gadgets.views.getParams();
	   var numberOfPosts = viewParams["numberOfPosts"];
       
       for (var i = 0; i < numberOfPosts; i++) {
         var entry = data.feed.entry[i];
         var dt = document.createElement("DT");
         dt.style.paddingTop = "10px";
         var dd = document.createElement("div"); 
		 dd.style.fontSize = "0.8em";
		 var de = document.createElement("div"); 
		 de.style.fontSize = "0.8em";
		 var df = document.createElement("div"); 
		 df.style.fontSize = "0.8em";
         var href; 
         for (var j = 0; j < entry.link.length; ++j) { 
           if (entry.link[j].rel == "alternate") { 
             href = entry.link[j].href.replace(/#/, "#comment-"); 
           }
         }
		 
		     var postdate = entry.published.$t;
			 var cdyear = postdate.substring(0,4);
			 var cdmonth = postdate.substring(5,7);
			 var cdday = postdate.substring(8,10);
			 var monthnames = new Array();
			 monthnames[1] = "Jan";
			 monthnames[2] = "Feb";
			 monthnames[3] = "Mar";
			 monthnames[4] = "Apr";
			 monthnames[5] = "May";
			 monthnames[6] = "Jun";
			 monthnames[7] = "Jul";
			 monthnames[8] = "Aug";
			 monthnames[9] = "Sep";
			 monthnames[10] = "Oct";
			 monthnames[11] = "Nov";
			 monthnames[12] = "Dec";
			if ("content" in entry) {
				var postcontent = entry.content.$t;}
			else
				if ("summary" in entry) {
				var postcontent = entry.summary.$t;}
			else var postcontent = "";
			var re = /<\S[^>]*>/g; 
			postcontent = postcontent.replace(re, "");
			
			var viewParams = gadgets.views.getParams();
			var numchars = viewParams["summaryLength"];
    
         var a = document.createElement("A");
         a.style.color = linkColor;
         a.setAttribute("href", href); 
		 a.target ='_top';
         a.appendChild(document.createTextNode(entry.author[0].name.$t + " wrote..."));
         dt.appendChild(a); 
		 if (postcontent.length < numchars) {
		 de.appendChild(document.createTextNode(postcontent));}
		 else {
		 postcontent = postcontent.substring(0, numchars);
		 var quoteEnd = postcontent.lastIndexOf(" ");
		 postcontent = postcontent.substring(0,quoteEnd);
		 de.appendChild(document.createTextNode(postcontent + '...'));
		 var more = document.createElement("A");
         more.style.color = linkColor;
         more.setAttribute("href", href); 
		 more.target ='_top';
         more.appendChild(document.createTextNode("Continue >>"));
		 df.appendChild(more);
		 }
		 
         list.appendChild(dt); 
		 list.appendChild(de);
		 list.appendChild(df);
       gadgets.window.adjustHeight();                                     
       }
     }

     
     var linkColor;
     var textColor;
     var backgroundColor;
     function initData() {
       textColor = gadgets.skins.getProperty('CONTENT_TEXT_COLOR');
       document.getElementById("output").style.color = textColor;
                     
       linkColor = gadgets.skins.getProperty('CONTENT_LINK_COLOR');
       document.getElementById("canvas-link").style.color = linkColor;
       
       backgroundColor = gadgets.skins.getProperty('CONTENT_BG_COLOR');
       document.body.style.backgroundColor = backgroundColor;

     
       var req = opensocial.newDataRequest();
       req.send(onLoadFriends);
     }
     gadgets.util.registerOnLoadHandler(initData); 
   </script><div id="canvas-link-container" style="display:none;float:right;font-size:80%">
     <a href="javascript:void(0);" id="canvas-link" onclick="goToCanvas();" style="color: rgb(61, 116, 165); ">Canvas mode</a>
   </div>
   <div style="clear:both"></div>
   <div>
   <div id="output" style="font-size: 90%; color: rgb(61, 61, 61); "><dt style="padding-top: 10px; "><a style="color: rgb(61, 116, 165); " href="http://skyandland-grace.blogspot.com/2012/03/blog-post.html?showComment=1330778623395#comment-c7568837596663980514" target="_top">宇帆 wrote...</a></dt><div style="font-size: 0.8em; ">昔人已遠離，典型夙昔，雖然不曾見過這位偉人，透過老師的這篇文章，就彷彿黃院長出現在面前一樣生動，也不禁懷念起以前在醫圖用功的日子......</div><div style="font-size: 0.8em; "></div><dt style="padding-top: 10px; "><a style="color: rgb(61, 116, 165); " href="http://skyandland-grace.blogspot.com/2012/02/blog-post_29.html?showComment=1330592439625#comment-c2268261035371118239" target="_top">Grace wrote...</a></dt><div style="font-size: 0.8em; ">好像是站在分岔處。</div><div style="font-size: 0.8em; "></div><dt style="padding-top: 10px; "><a style="color: rgb(61, 116, 165); " href="http://skyandland-grace.blogspot.com/2012/02/blog-post_29.html?showComment=1330590195757#comment-c5847430093675461291" target="_top">JJ wrote...</a></dt><div style="font-size: 0.8em; ">請問第二張照片中的领角鴞是站在斜枝上，還是站在後方一個被擋住的橫枝上？</div><div style="font-size: 0.8em; "></div><dt style="padding-top: 10px; "><a style="color: rgb(61, 116, 165); " href="http://skyandland-grace.blogspot.com/2012/01/blog-post_11.html?showComment=1329484565708#comment-c8788968320499821715" target="_top">Grace wrote...</a></dt><div style="font-size: 0.8em; ">我也想破口大罵，但只能忍氣吞聲，在醫院，病人可是弱勢的一方啊！</div><div style="font-size: 0.8em; "></div><dt style="padding-top: 10px; "><a style="color: rgb(61, 116, 165); " href="http://skyandland-grace.blogspot.com/2012/01/blog-post_11.html?showComment=1329482460644#comment-c4297898464707801407" target="_top">綉雯 wrote...</a></dt><div style="font-size: 0.8em; ">Dear 陳老師:任伯伯現在都還好嗎?看完這過程我想只能說老師修養好，要是我可能就破口大罵了!!</div><div style="font-size: 0.8em; "></div></div>
   </div>
  

  <script>gadgets.util.runOnLoadHandlers();</script><script>window.google.csi.tickDl();
</script></body></html>